{
  "hash": "030ff5eba1872bcb9d1e89508bb21e8b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tjedan 12: Usporedba prosjeka t-testovima\"\nsubtitle: \"Kad pretpostavke drže i kad ne drže\"\ndate: 2025-05-10\ncategories: [t-test, provjera pretpostavki, normalnost, Wilcoxon test, Cohenov d]\ndraft: false\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n::: {.callout-note}\n## Ishodi učenja\n\nNakon ovog predavanja moći ćete\n\n1. Odabrati odgovarajući t-test (jednouzorački, nezavisni, upareni) za zadano istraživačko pitanje.\n2. Provjeriti pretpostavke t-testa (normalnost, homogenost varijance) i znati što učiniti kad su narušene.\n3. Primijeniti Shapiro-Wilkov test i QQ plot za provjeru normalnosti.\n4. Provesti Wilcoxonov test kao neparametrijsku alternativu kad normalnost nije zadovoljena.\n5. Izračunati i interpretirati Cohenov d za sve tri vrste t-testa.\n6. Pravilno izvijestiti rezultate t-testa u APA formatu.\n7. Provesti kompletnu analizu usporedbe dvaju uvjeta na stvarnim podacima.\n:::\n\n## Motivacija: vizuali u člancima\n\nUredništvo web portala razmatra redizajn članka. Dosad su objavljali pretežno tekstualne članke, ali razmišljaju o dodavanju infografika, slika i vizualnih elemenata. Pitanje je: kako vizuali utječu na čitateljsko iskustvo? Mijenjaju li vrijeme čitanja, razumijevanje, namjeru dijeljenja, percipiranu vjerodostojnost?\n\nProveli ste eksperiment: 120 članaka je prezentirano ispitanicima u dva uvjeta (s vizualima i bez vizuala). Svaki članak je testiran u oba uvjeta (within-subjects dizajn), što znači da ćemo koristiti **upareni t-test**.\n\nNa predavanju o testiranju hipoteza (tjedan 10) naučili smo logiku t-testa, p-vrijednost i greške tipa I i II. Ovo predavanje se fokusira na praktičnu primjenu: provjeru pretpostavki, odabir pravog testa i pravilno izvještavanje rezultata.\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles <- read_csv(\"../resources/datasets/article_visuals.csv\")\nglimpse(articles)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 120\nColumns: 12\n$ article_id                <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 1~\n$ category                  <chr> \"tehnologija\", \"politika\", \"tehnologija\", \"t~\n$ length_category           <chr> \"srednji\", \"kratki\", \"srednji\", \"kratki\", \"s~\n$ word_count                <dbl> 589, 307, 805, 447, 626, 827, 802, 302, 578,~\n$ reading_time_no_visual    <dbl> 4.9, 2.3, 3.4, 1.6, 3.3, 6.4, 2.7, 0.7, 3.4,~\n$ reading_time_with_visual  <dbl> 5.8, 3.0, 3.9, 1.8, 4.4, 7.6, 3.2, 0.9, 3.9,~\n$ comprehension_no_visual   <dbl> 5, 6, 6, 6, 5, 8, 6, 9, 6, 5, 5, 7, 6, 10, 5~\n$ comprehension_with_visual <dbl> 6, 7, 7, 6, 7, 9, 6, 9, 6, 6, 5, 8, 7, 10, 6~\n$ sharing_no_visual         <dbl> 2, 3, 3, 4, 3, 2, 3, 3, 3, 2, 3, 3, 2, 3, 3,~\n$ sharing_with_visual       <dbl> 3, 5, 2, 4, 3, 2, 4, 4, 4, 3, 4, 3, 2, 3, 3,~\n$ credibility_no_visual     <dbl> 5, 5, 2, 2, 5, 6, 3, 3, 5, 4, 5, 3, 3, 2, 5,~\n$ credibility_with_visual   <dbl> 4, 5, 4, 3, 5, 7, 3, 2, 6, 4, 6, 4, 3, 2, 5,~\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles |>\n  summarise(\n    n = n(),\n    M_time_no = round(mean(reading_time_no_visual), 2),\n    M_time_with = round(mean(reading_time_with_visual), 2),\n    M_comp_no = round(mean(comprehension_no_visual), 2),\n    M_comp_with = round(mean(comprehension_with_visual), 2),\n    M_share_no = round(mean(sharing_no_visual), 2),\n    M_share_with = round(mean(sharing_with_visual), 2)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 x 7\n      n M_time_no M_time_with M_comp_no M_comp_with M_share_no M_share_with\n  <int>     <dbl>       <dbl>     <dbl>       <dbl>      <dbl>        <dbl>\n1   120      3.43        4.02      5.94        6.74       2.48         3.15\n```\n\n\n:::\n:::\n\n\nČlanci s vizualima imaju duže vrijeme čitanja, bolje razumijevanje i višu namjeru dijeljenja. Ali prije nego izvučemo zaključke, moramo provjeriti pretpostavke.\n\n---\n\n## Podsjetnik: tri vrste t-testa {#sec-podsjetnik}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~test, ~pitanje, ~R_kod,\n  \"Jednouzorački\", \"Razlikuje li se prosjek od poznate vrijednosti?\", \"t.test(x, mu = vrijednost)\",\n  \"Nezavisni (dvouzorački)\", \"Razlikuju li se prosjeci dviju nezavisnih grupa?\", \"t.test(x, y)\",\n  \"Upareni\", \"Razlikuje li se prosjek u dva uvjeta za iste jedinice?\", \"t.test(x, y, paired = TRUE)\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 x 3\n  test                    pitanje                                          R_kod\n  <chr>                   <chr>                                            <chr>\n1 Jednouzorački           Razlikuje li se prosjek od poznate vrijednosti?  t.te~\n2 Nezavisni (dvouzorački) Razlikuju li se prosjeci dviju nezavisnih grupa? t.te~\n3 Upareni                 Razlikuje li se prosjek u dva uvjeta za iste je~ t.te~\n```\n\n\n:::\n:::\n\n\nZa naše podatke (isti članci u dva uvjeta), koristimo upareni t-test. Ali prvo moramo provjeriti pretpostavke.\n\n---\n\n## Pretpostavke t-testa {#sec-pretpostavke}\n\nT-test ima nekoliko pretpostavki koje moramo provjeriti prije nego mu vjerujemo.\n\n**Za sve t-testove:**\n\nPodaci su barem intervalna skala (razlike između vrijednosti imaju smisla). Opažanja su nezavisna jedno od drugoga (osim parova u uparenom testu). Distribucija je približno normalna (ili je uzorak dovoljno velik da CLT kompenzira).\n\n**Dodatno za nezavisni t-test:**\n\nVarijance dviju grupa su približno jednake (Studentov t-test) ili koristimo Welchovu korekciju koja ne zahtijeva ovu pretpostavku (default u R-u).\n\nNajvažnija pretpostavka za provjeru je **normalnost**. Za upareni t-test, trebamo provjeriti normalnost RAZLIKA (ne pojedinačnih mjerenja).\n\n---\n\n## Provjera normalnosti {#sec-normalnost}\n\n### Vizualna provjera: histogram i QQ plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Za upareni test: provjera normalnosti RAZLIKA\narticles <- articles |>\n  mutate(diff_time = reading_time_with_visual - reading_time_no_visual,\n         diff_comp = comprehension_with_visual - comprehension_no_visual,\n         diff_share = sharing_with_visual - sharing_no_visual,\n         diff_cred = credibility_with_visual - credibility_no_visual)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles |>\n  ggplot(aes(x = diff_time)) +\n  geom_histogram(aes(y = after_stat(density)), fill = \"steelblue\", color = \"white\", bins = 25) +\n  stat_function(fun = dnorm, \n                args = list(mean = mean(articles$diff_time), sd = sd(articles$diff_time)),\n                color = \"firebrick\", linewidth = 1) +\n  labs(\n    title = \"Distribucija razlika u vremenu citanja (s vizualima minus bez)\",\n    subtitle = \"Crvena krivulja = normalna distribucija s istim M i SD\",\n    x = \"Razlika u minutama\",\n    y = \"Gustoca\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/histogram-razlike-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# QQ plotovi za sve cetiri razlike\narticles |>\n  select(starts_with(\"diff_\")) |>\n  pivot_longer(everything(), names_to = \"varijabla\", values_to = \"razlika\") |>\n  mutate(varijabla = case_when(\n    varijabla == \"diff_time\" ~ \"Vrijeme citanja\",\n    varijabla == \"diff_comp\" ~ \"Razumijevanje\",\n    varijabla == \"diff_share\" ~ \"Namjera dijeljenja\",\n    varijabla == \"diff_cred\" ~ \"Vjerodostojnost\"\n  )) |>\n  ggplot(aes(sample = razlika)) +\n  stat_qq(color = \"steelblue\", alpha = 0.6) +\n  stat_qq_line(color = \"firebrick\") +\n  facet_wrap(~varijabla, scales = \"free\") +\n  labs(\n    title = \"QQ plotovi za razlike (upareni uvjeti)\",\n    subtitle = \"Tocke blizu linije = normalna distribucija. Odstupanja na repovima su cesta.\",\n    x = \"Teoretski kvantili\",\n    y = \"Opazeni kvantili\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/qq-plot-razlike-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nQQ plot je najinformativniji dijagnostički alat za normalnost. Ako točke leže blizu dijagonalne linije, distribucija je približno normalna. Blaga odstupanja na repovima su prihvatljiva, osobito za n > 30. Sustavna zakrivljenost (S-oblik ili J-oblik) sugerira problem.\n\nRazlike u vremenu čitanja i razumijevanju izgledaju razumno normalno. Razlike u dijeljenju i vjerodostojnosti su diskretnije (Likert skala) pa QQ plot pokazuje stepeničast uzorak, što je očekivano.\n\n### Shapiro-Wilkov test\n\n**Shapiro-Wilkov test** je formalni test normalnosti. H₀ je da su podaci normalno distribuirani. Ako je p < 0.05, odbacujemo normalnost.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble(\n  varijabla = c(\"Vrijeme citanja\", \"Razumijevanje\", \"Namjera dijeljenja\", \"Vjerodostojnost\"),\n  W = c(\n    shapiro.test(articles$diff_time)$statistic,\n    shapiro.test(articles$diff_comp)$statistic,\n    shapiro.test(articles$diff_share)$statistic,\n    shapiro.test(articles$diff_cred)$statistic\n  ),\n  p = c(\n    shapiro.test(articles$diff_time)$p.value,\n    shapiro.test(articles$diff_comp)$p.value,\n    shapiro.test(articles$diff_share)$p.value,\n    shapiro.test(articles$diff_cred)$p.value\n  )\n) |>\n  mutate(\n    W = round(W, 4),\n    p = round(p, 4),\n    normalno = if_else(p >= 0.05, \"Da\", \"Ne\")\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 4\n  varijabla              W     p normalno\n  <chr>              <dbl> <dbl> <chr>   \n1 Vrijeme citanja    0.908     0 Ne      \n2 Razumijevanje      0.715     0 Ne      \n3 Namjera dijeljenja 0.93      0 Ne      \n4 Vjerodostojnost    0.810     0 Ne      \n```\n\n\n:::\n:::\n\n\nRazlike u vremenu čitanja prolaze test normalnosti (p > 0.05). Razlike u Likert varijablama (dijeljenje, vjerodostojnost) možda ne prolaze jer su diskretne (samo cjelobrojne vrijednosti). Za te varijable razmotrimo neparametrijske alternative.\n\n::: {.callout-important}\n## Važna napomena o Shapiro-Wilkovom testu\n\nShapiro-Wilkov test ima isti problem kao i svaki statistički test: s velikim uzorkom detektira i trivijalna odstupanja od normalnosti. S n = 500, gotovo svaka distribucija \"ne prolazi\" Shapiro-Wilkov test. S n = 15, gotovo svaka distribucija \"prolazi.\"\n\nZato je vizualna procjena (QQ plot) jednako važna kao formalni test. Pravilo palca: ako QQ plot izgleda razumno i n > 30, t-test je dovoljno robustan čak i za umjerena odstupanja od normalnosti (zahvaljujući CLT-u).\n:::\n\n---\n\n## Provjera homogenosti varijance {#sec-varijance}\n\nZa nezavisni t-test, Studentova verzija pretpostavlja jednake varijance u dvjema grupama. Levenov test (ili Bartlettov test) provjerava ovu pretpostavku.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Demonstracija na simuliranim podacima (nezavisne grupe)\nset.seed(42)\ngrupa_a <- rnorm(50, mean = 5, sd = 1.0)\ngrupa_b <- rnorm(50, mean = 6, sd = 2.5)  # razlicita varijanca!\n\ncat(\"SD grupa A:\", round(sd(grupa_a), 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSD grupa A: 1.15 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"SD grupa B:\", round(sd(grupa_b), 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSD grupa B: 2.31 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Omjer varijanci:\", round(var(grupa_b) / var(grupa_a), 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOmjer varijanci: 4.03 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Studentov t-test (pretpostavlja jednake varijance)\nstudent_rez <- t.test(grupa_a, grupa_b, var.equal = TRUE)\n\n# Welchov t-test (ne pretpostavlja jednake varijance, DEFAULT)\nwelch_rez <- t.test(grupa_a, grupa_b, var.equal = FALSE)\n\ntibble(\n  test = c(\"Student (var.equal = TRUE)\", \"Welch (var.equal = FALSE, DEFAULT)\"),\n  t = round(c(student_rez$statistic, welch_rez$statistic), 3),\n  df = round(c(student_rez$parameter, welch_rez$parameter), 1),\n  p = round(c(student_rez$p.value, welch_rez$p.value), 4)\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 x 4\n  test                                   t    df      p\n  <chr>                              <dbl> <dbl>  <dbl>\n1 Student (var.equal = TRUE)         -3.52  98   0.0006\n2 Welch (var.equal = FALSE, DEFAULT) -3.52  71.9 0.0007\n```\n\n\n:::\n:::\n\n\nWelchov test ima nerunde stupnjeve slobode jer ih prilagođava za razliku u varijancama. Kad su varijance jednake, oba testa daju iste rezultate. Kad su varijance različite, Welchov test je točniji.\n\n::: {.callout-tip}\n## Praktični savjet\n\nKoristite Welchov t-test (default u R-u) uvijek. Ne morate provjeravati homogenost varijance jer Welchov test radi jednako dobro kad su varijance jednake i bolje kad su različite. Studentov t-test s `var.equal = TRUE` koristite samo ako imate specifičan razlog (npr. usporedba s objavljenim rezultatima koji koriste Studentov test).\n:::\n\n---\n\n## Upareni t-test na podacima o vizualima {#sec-upareni}\n\nSada provodimo upareni t-test za naše glavno pitanje: utječu li vizuali na vrijeme čitanja?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Upareni t-test: vrijeme citanja s vizualima vs bez\ntime_test <- t.test(\n  articles$reading_time_with_visual, \n  articles$reading_time_no_visual, \n  paired = TRUE\n)\ntime_test\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPaired t-test\n\ndata:  articles$reading_time_with_visual and articles$reading_time_no_visual\nt = 11.764, df = 119, p-value < 2.2e-16\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n 0.4900011 0.6883323\nsample estimates:\nmean difference \n      0.5891667 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cohenov d za upareni test: d = M_razlika / SD_razlika\nd_time <- mean(articles$diff_time) / sd(articles$diff_time)\n\ncat(\"=== Upareni t-test: Vrijeme citanja ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== Upareni t-test: Vrijeme citanja ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Bez vizuala: M =\", round(mean(articles$reading_time_no_visual), 2), \"min\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nBez vizuala: M = 3.43 min\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"S vizualima: M =\", round(mean(articles$reading_time_with_visual), 2), \"min\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nS vizualima: M = 4.02 min\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Razlika: M =\", round(mean(articles$diff_time), 2), \"min\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRazlika: M = 0.59 min\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"t(\", time_test$parameter, \") = \", round(time_test$statistic, 2), \"\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nt(119) = 11.76\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"p < 0.001\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\np < 0.001\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"95% CI za razliku: [\", round(time_test$conf.int[1], 2), \",\", \n    round(time_test$conf.int[2], 2), \"] min\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n95% CI za razliku: [ 0.49 , 0.69 ] min\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Cohenov d:\", round(d_time, 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCohenov d: 1.07 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Interpretacija: Veliki ucinak. Vizuali povecavaju vrijeme citanja za ~35 sekundi.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nInterpretacija: Veliki ucinak. Vizuali povecavaju vrijeme citanja za ~35 sekundi.\n```\n\n\n:::\n:::\n\n\n### Vizualizacija uparenih podataka\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Prikaz razlika\narticles |>\n  ggplot(aes(x = diff_time)) +\n  geom_histogram(fill = \"steelblue\", color = \"white\", bins = 20) +\n  geom_vline(xintercept = 0, color = \"grey50\", linetype = \"dashed\", linewidth = 0.8) +\n  geom_vline(xintercept = mean(articles$diff_time), color = \"firebrick\", linewidth = 1) +\n  annotate(\"text\", x = mean(articles$diff_time) + 0.05, y = 15, \n           label = paste0(\"M = +\", round(mean(articles$diff_time), 2), \" min\"),\n           color = \"firebrick\", hjust = 0, fontface = \"bold\") +\n  labs(\n    title = \"Razlike u vremenu citanja (s vizualima minus bez vizuala)\",\n    subtitle = \"Vecina razlika je pozitivna: vizuali povecavaju vrijeme citanja\",\n    x = \"Razlika (minute)\",\n    y = \"Broj clanaka\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/paired-vizualizacija-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Slope chart za prvih 40 clanaka (za preglednost)\narticles |>\n  slice(1:40) |>\n  select(article_id, reading_time_no_visual, reading_time_with_visual) |>\n  pivot_longer(-article_id, names_to = \"uvjet\", values_to = \"vrijeme\") |>\n  mutate(uvjet = if_else(str_detect(uvjet, \"no\"), \"Bez vizuala\", \"S vizualima\")) |>\n  ggplot(aes(x = uvjet, y = vrijeme, group = article_id)) +\n  geom_line(alpha = 0.3, color = \"grey50\") +\n  geom_point(aes(color = uvjet), size = 2, alpha = 0.6) +\n  stat_summary(aes(group = 1), fun = mean, geom = \"line\", linewidth = 2, color = \"firebrick\") +\n  stat_summary(aes(group = 1), fun = mean, geom = \"point\", size = 4, color = \"firebrick\") +\n  scale_color_manual(values = c(\"Bez vizuala\" = \"steelblue\", \"S vizualima\" = \"#2a9d8f\")) +\n  labs(\n    title = \"Vrijeme citanja po uvjetu (prvih 40 clanaka)\",\n    subtitle = \"Sive linije = pojedinacni clanci. Crvena linija = prosjek.\",\n    x = NULL,\n    y = \"Vrijeme citanja (min)\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/paired-slope-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nSlope chart jasno pokazuje da većina linija ide prema gore (duže čitanje s vizualima). Crvena linija (prosjek) potvrđuje ukupni trend.\n\n---\n\n## Sva četiri ishoda: sustavni pristup {#sec-svi-ishodi}\n\nProvedimo upareni t-test za sve četiri mjere istovremeno.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Funkcija za kompletnu analizu jednog para\nuparena_analiza <- function(x_with, x_no, naziv) {\n  diff <- x_with - x_no\n  test <- t.test(x_with, x_no, paired = TRUE)\n  d <- mean(diff) / sd(diff)\n  shapiro_p <- shapiro.test(diff)$p.value\n  \n  tibble(\n    ishod = naziv,\n    M_bez = round(mean(x_no), 2),\n    M_s = round(mean(x_with), 2),\n    M_razlika = round(mean(diff), 2),\n    t = round(test$statistic, 2),\n    df = test$parameter,\n    p = test$p.value,\n    d = round(d, 2),\n    shapiro_p = round(shapiro_p, 4)\n  )\n}\n\nrezultati <- bind_rows(\n  uparena_analiza(articles$reading_time_with_visual, articles$reading_time_no_visual, \"Vrijeme citanja (min)\"),\n  uparena_analiza(articles$comprehension_with_visual, articles$comprehension_no_visual, \"Razumijevanje (0-10)\"),\n  uparena_analiza(articles$sharing_with_visual, articles$sharing_no_visual, \"Namjera dijeljenja (1-5)\"),\n  uparena_analiza(articles$credibility_with_visual, articles$credibility_no_visual, \"Vjerodostojnost (1-7)\")\n) |>\n  mutate(\n    znacajno = p < 0.05,\n    velicina = case_when(\n      abs(d) >= 0.8 ~ \"veliki\",\n      abs(d) >= 0.5 ~ \"srednji\",\n      abs(d) >= 0.2 ~ \"mali\",\n      .default = \"zanemariv\"\n    ),\n    normalnost_ok = shapiro_p >= 0.05\n  )\n\nrezultati |>\n  mutate(p = format(p, scientific = TRUE, digits = 2)) |>\n  select(ishod, M_bez, M_s, M_razlika, t, p, d, velicina, normalnost_ok)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 9\n  ishod           M_bez   M_s M_razlika     t p         d velicina normalnost_ok\n  <chr>           <dbl> <dbl>     <dbl> <dbl> <chr> <dbl> <chr>    <lgl>        \n1 Vrijeme citanj~  3.43  4.02      0.59 11.8  1.1e~  1.07 veliki   FALSE        \n2 Razumijevanje ~  5.94  6.74      0.8  16.1  1.1e~  1.47 veliki   FALSE        \n3 Namjera dijelj~  2.48  3.15      0.67  5.49 2.3e~  0.5  srednji  FALSE        \n4 Vjerodostojnos~  4.41  4.64      0.23  3.81 2.2e~  0.35 mali     FALSE        \n```\n\n\n:::\n:::\n\n\nTablica daje kompletnu sliku. Vrijeme čitanja i razumijevanje imaju normalne razlike (Shapiro p > 0.05) i značajne razlike s velikim učincima. Namjera dijeljenja i vjerodostojnost imaju diskretne distribucije (Shapiro može biti < 0.05) i manje učinke.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Forest plot: efekt vizuala na sve ishode (standardizirani)\nrezultati |>\n  mutate(\n    ishod = fct_reorder(ishod, d),\n    ci_lo = d - 1.96 * (1 / sqrt(120)),\n    ci_hi = d + 1.96 * (1 / sqrt(120))\n  ) |>\n  ggplot(aes(y = ishod)) +\n  geom_errorbarh(aes(xmin = ci_lo, xmax = ci_hi), height = 0.3, linewidth = 1, color = \"steelblue\") +\n  geom_point(aes(x = d), size = 3, color = \"steelblue\") +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"grey50\") +\n  geom_vline(xintercept = c(0.2, 0.5, 0.8), linetype = \"dotted\", color = \"grey70\") +\n  annotate(\"text\", x = c(0.2, 0.5, 0.8), y = 0.5, \n           label = c(\"mali\", \"srednji\", \"veliki\"), color = \"grey50\", size = 3) +\n  labs(\n    title = \"Efekt vizuala na citateljsko iskustvo\",\n    subtitle = \"Cohenov d s 95% CI. Svi efekti su pozitivni: vizuali poboljsavaju sve ishode.\",\n    x = \"Cohenov d (standardizirana razlika)\",\n    y = NULL\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/forest-plot-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nForest plot je standardni način prikaza višestrukih veličina učinka. Sve točke su desno od nule (vizuali poboljšavaju sve ishode), a CI-evi ne prelaze nulu (svi efekti su statistički značajni). Najveći efekt je na razumijevanje, najmanji na vjerodostojnost.\n\n---\n\n## Neparametrijske alternative: Wilcoxonov test {#sec-wilcoxon}\n\nKad normalnost nije zadovoljena i uzorak je premalen da CLT kompenzira, koristimo **neparametrijske testove**. Oni ne pretpostavljaju normalnost jer rade s rangovima umjesto s izvornim vrijednostima.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~parametrijski, ~neparametrijski, ~R_funkcija,\n  \"Jednouzorački t-test\", \"Wilcoxonov signed-rank test\", \"wilcox.test(x, mu = vrijednost)\",\n  \"Nezavisni t-test\", \"Mann-Whitney U test\", \"wilcox.test(x, y)\",\n  \"Upareni t-test\", \"Wilcoxonov signed-rank test\", \"wilcox.test(x, y, paired = TRUE)\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 x 3\n  parametrijski        neparametrijski             R_funkcija                   \n  <chr>                <chr>                       <chr>                        \n1 Jednouzorački t-test Wilcoxonov signed-rank test wilcox.test(x, mu = vrijedno~\n2 Nezavisni t-test     Mann-Whitney U test         wilcox.test(x, y)            \n3 Upareni t-test       Wilcoxonov signed-rank test wilcox.test(x, y, paired = T~\n```\n\n\n:::\n:::\n\n\nWilcoxonov test rangira sve razlike po apsolutnoj vrijednosti, dodaje im predznake i testira je li suma pozitivnih rangova značajno veća (ili manja) od očekivane pod H₀.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Namjera dijeljenja: Likert skala, mozda nije normalna\n# Parametrijski (t-test)\nt_share <- t.test(articles$sharing_with_visual, articles$sharing_no_visual, paired = TRUE)\n\n# Neparametrijski (Wilcoxon)\nw_share <- wilcox.test(articles$sharing_with_visual, articles$sharing_no_visual, paired = TRUE)\n\ncat(\"=== Namjera dijeljenja: parametrijski vs neparametrijski ===\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== Namjera dijeljenja: parametrijski vs neparametrijski ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Upareni t-test:          p =\", round(t_share$p.value, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nUpareni t-test:          p = 0 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Wilcoxon signed-rank:    p =\", round(w_share$p.value, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWilcoxon signed-rank:    p = 0 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Usporedba t-test vs Wilcoxon za sve ishode\nwilcox_rezultati <- bind_rows(\n  tibble(ishod = \"Vrijeme citanja\", \n         p_t = t.test(articles$reading_time_with_visual, articles$reading_time_no_visual, paired = TRUE)$p.value,\n         p_w = wilcox.test(articles$reading_time_with_visual, articles$reading_time_no_visual, paired = TRUE)$p.value),\n  tibble(ishod = \"Razumijevanje\",\n         p_t = t.test(articles$comprehension_with_visual, articles$comprehension_no_visual, paired = TRUE)$p.value,\n         p_w = wilcox.test(articles$comprehension_with_visual, articles$comprehension_no_visual, paired = TRUE)$p.value),\n  tibble(ishod = \"Namjera dijeljenja\",\n         p_t = t.test(articles$sharing_with_visual, articles$sharing_no_visual, paired = TRUE)$p.value,\n         p_w = wilcox.test(articles$sharing_with_visual, articles$sharing_no_visual, paired = TRUE)$p.value),\n  tibble(ishod = \"Vjerodostojnost\",\n         p_t = t.test(articles$credibility_with_visual, articles$credibility_no_visual, paired = TRUE)$p.value,\n         p_w = wilcox.test(articles$credibility_with_visual, articles$credibility_no_visual, paired = TRUE)$p.value)\n) |>\n  mutate(\n    p_t = format(p_t, scientific = TRUE, digits = 2),\n    p_w = format(p_w, scientific = TRUE, digits = 2)\n  )\n\nwilcox_rezultati\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 3\n  ishod              p_t     p_w    \n  <chr>              <chr>   <chr>  \n1 Vrijeme citanja    1.1e-21 2.2e-18\n2 Razumijevanje      1.1e-31 1.9e-19\n3 Namjera dijeljenja 2.3e-07 9.1e-07\n4 Vjerodostojnost    2.2e-04 3.2e-04\n```\n\n\n:::\n:::\n\n\nZa naše podatke, t-test i Wilcoxon daju konzistentne zaključke. Ovo je čest slučaj kad je n > 30 (CLT čini t-test robusnim). Kad rezultati nisu konzistentni, to je signal da treba opreznije interpretirati.\n\n::: {.callout-tip}\n## Kada koristiti neparametrijski test?\n\nKoristite Wilcoxon kad: (1) uzorak je mali (n < 30) i distribucija je jasno nenormalna, (2) podaci su ordinalni (Likert skala s malo kategorija), (3) postoje ekstremni outlieri koji iskrivljuju prosjek, (4) želite robusniju analizu kao provjeru (report oba rezultata). Za n > 50 s umjereno normalnim podacima, t-test je gotovo uvijek dobar izbor zahvaljujući CLT-u.\n:::\n\n---\n\n## Efekt vizuala po kategoriji članka {#sec-po-kategoriji}\n\nProsječni efekt vizuala na razumijevanje je velik, ali je li konzistentan za sve teme? Možda vizuali pomažu više kod tehničkih tema nego kod sporta?\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles |>\n  group_by(category) |>\n  summarise(\n    n = n(),\n    M_diff_comp = round(mean(diff_comp), 2),\n    SD_diff_comp = round(sd(diff_comp), 2),\n    t = round(t.test(comprehension_with_visual, comprehension_no_visual, paired = TRUE)$statistic, 2),\n    p = round(t.test(comprehension_with_visual, comprehension_no_visual, paired = TRUE)$p.value, 4),\n    d = round(mean(diff_comp) / sd(diff_comp), 2),\n    .groups = \"drop\"\n  ) |>\n  arrange(desc(d))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 x 7\n  category        n M_diff_comp SD_diff_comp     t      p     d\n  <chr>       <int>       <dbl>        <dbl> <dbl>  <dbl> <dbl>\n1 sport          24        0.79         0.41  9.35 0       1.91\n2 tehnologija    21        0.9          0.54  7.69 0       1.68\n3 zdravlje       27        0.85         0.6   7.36 0       1.42\n4 politika       32        0.78         0.61  7.27 0       1.28\n5 kultura        16        0.62         0.5   5    0.0002  1.25\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles |>\n  group_by(category) |>\n  summarise(\n    M = mean(diff_comp),\n    SE = sd(diff_comp) / sqrt(n()),\n    .groups = \"drop\"\n  ) |>\n  mutate(category = fct_reorder(category, M)) |>\n  ggplot(aes(y = category)) +\n  geom_errorbarh(aes(xmin = M - 1.96 * SE, xmax = M + 1.96 * SE), \n                 height = 0.3, linewidth = 1, color = \"steelblue\") +\n  geom_point(aes(x = M), size = 3, color = \"steelblue\") +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"grey50\") +\n  labs(\n    title = \"Efekt vizuala na razumijevanje po kategoriji clanka\",\n    subtitle = \"95% CI za prosjecnu razliku. Vizuali pomazu u svim kategorijama.\",\n    x = \"Poboljsanje razumijevanja (bodovi, 0-10 skala)\",\n    y = NULL\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/po-kategoriji-vizualizacija-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n---\n\n\n::: {.callout-note}\n## Podsjetnik\n\nU prvom dijelu proveli smo upareni t-test na podacima o vizualima u člancima, provjerili normalnost (QQ plot, Shapiro-Wilk), usporedili parametrijski i neparametrijski pristup (Wilcoxon) i prikazali efekte forest plotom. U ovom dijelu pokrivamo APA izvještavanje, nezavisni t-test na primjeru, utjecaj outliera i kompletnu analizu.\n:::\n\n## Izvještavanje u APA formatu {#sec-apa}\n\nAmerička psihološka asocijacija (APA) propisuje standardizirani format za izvještavanje statističkih rezultata koji se koristi u većini društvenih znanosti, uključujući komunikologiju. Format omogućuje čitatelju da brzo razumije što je testirano, koliko je jaki dokaz i koliki je učinak.\n\n### Upareni t-test\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles <- read_csv(\"../resources/datasets/article_visuals.csv\") |>\n  mutate(diff_time = reading_time_with_visual - reading_time_no_visual,\n         diff_comp = comprehension_with_visual - comprehension_no_visual,\n         diff_share = sharing_with_visual - sharing_no_visual,\n         diff_cred = credibility_with_visual - credibility_no_visual)\n\n# Elementi za APA izvjestaj\ntest <- t.test(articles$reading_time_with_visual, articles$reading_time_no_visual, paired = TRUE)\nd <- mean(articles$diff_time) / sd(articles$diff_time)\nn <- nrow(articles)\n\ncat(\"APA format (upareni t-test):\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAPA format (upareni t-test):\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Clanci s vizualima imali su statisticki znacajno duze vrijeme citanja\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nClanci s vizualima imali su statisticki znacajno duze vrijeme citanja\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"(M = \", round(mean(articles$reading_time_with_visual), 2), \n    \", SD = \", round(sd(articles$reading_time_with_visual), 2), \n    \") od clanaka bez vizuala\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n(M = 4.02, SD = 2.18) od clanaka bez vizuala\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"(M = \", round(mean(articles$reading_time_no_visual), 2), \n    \", SD = \", round(sd(articles$reading_time_no_visual), 2), \n    \"),\\nt(\", test$parameter, \") = \", round(test$statistic, 2), \n    \", p < .001, d = \", round(d, 2), \".\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n(M = 3.43, SD = 1.82),\nt(119) = 11.76, p < .001, d = 1.07.\n```\n\n\n:::\n:::\n\n\n### Struktura APA izvještaja\n\nAPA format za t-test uvijek sadrži sljedeće elemente: opis smjera razlike riječima, prosjeke i standardne devijacije obiju grupa, vrstu testa s df u zagradi, t-vrijednost zaokruženu na 2 decimale, p-vrijednost (točnu ili \"< .001\" za vrlo male), mjeru veličine učinka (Cohenov d).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Funkcija za automatski APA izvjestaj\napa_paired <- function(x, y, naziv_x, naziv_y, naziv_ishoda) {\n  test <- t.test(x, y, paired = TRUE)\n  diff <- x - y\n  d <- mean(diff) / sd(diff)\n  \n  p_text <- if_else(test$p.value < 0.001, \"p < .001\", \n                    paste0(\"p = \", sub(\"^0\", \"\", sprintf(\"%.3f\", test$p.value))))\n  \n  paste0(naziv_x, \" imali su \", \n         if_else(mean(diff) > 0, \"visi\", \"nizi\"), \" \", naziv_ishoda,\n         \" (M = \", round(mean(x), 2), \", SD = \", round(sd(x), 2), \n         \") od \", naziv_y,\n         \" (M = \", round(mean(y), 2), \", SD = \", round(sd(y), 2), \n         \"), t(\", test$parameter, \") = \", round(test$statistic, 2), \n         \", \", p_text, \", d = \", round(d, 2), \".\")\n}\n\n# Primjeri\ncat(apa_paired(articles$reading_time_with_visual, articles$reading_time_no_visual,\n               \"Clanci s vizualima\", \"clanaka bez vizuala\", \"vrijeme citanja\"), \"\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nClanci s vizualima imali su visi vrijeme citanja (M = 4.02, SD = 2.18) od clanaka bez vizuala (M = 3.43, SD = 1.82), t(119) = 11.76, p < .001, d = 1.07. \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(apa_paired(articles$comprehension_with_visual, articles$comprehension_no_visual,\n               \"Clanci s vizualima\", \"clanaka bez vizuala\", \"razumijevanje\"), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nClanci s vizualima imali su visi razumijevanje (M = 6.74, SD = 1.65) od clanaka bez vizuala (M = 5.94, SD = 1.57), t(119) = 16.11, p < .001, d = 1.47. \n```\n\n\n:::\n:::\n\n\n::: {.callout-tip}\n## Praktični savjet\n\nKoristite ovu `apa_paired()` funkciju kao predložak i prilagodite je za svoje izvještaje. Konzistentno formatiranje štedi vrijeme i smanjuje greške. Mnogi R paketi (npr. `report`, `papaja`) automatiziraju APA izvještavanje, ali razumijevanje strukture je važnije od korištenja paketa.\n:::\n\n---\n\n## Nezavisni t-test: kratki vs dugi članci {#sec-nezavisni}\n\nUpareni t-test je bio prikladan za usporedbu uvjeta (s/bez vizuala) jer je svaki članak bio u oba uvjeta. Ali ponekad uspoređujemo dvije odvojene grupe. Na primjer: razlikuje li se razumijevanje između kratkih i dugih članaka?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Usporedba kratkih vs dugih clanaka (BEZ vizuala, da izoliramo efekt duzine)\narticles_kd <- articles |>\n  filter(length_category %in% c(\"kratki\", \"dugi\"))\n\narticles_kd |>\n  group_by(length_category) |>\n  summarise(\n    n = n(),\n    M_comp = round(mean(comprehension_no_visual), 2),\n    SD_comp = round(sd(comprehension_no_visual), 2),\n    M_time = round(mean(reading_time_no_visual), 2),\n    .groups = \"drop\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 x 5\n  length_category     n M_comp SD_comp M_time\n  <chr>           <int>  <dbl>   <dbl>  <dbl>\n1 dugi               24   6.12    1.54   6.03\n2 kratki             41   6.1     1.69   1.91\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Provjera normalnosti po grupama\narticles_kd |>\n  ggplot(aes(sample = comprehension_no_visual)) +\n  stat_qq(color = \"steelblue\") +\n  stat_qq_line(color = \"firebrick\") +\n  facet_wrap(~length_category) +\n  labs(\n    title = \"QQ plotovi za razumijevanje po duzini clanka\",\n    x = \"Teoretski kvantili\",\n    y = \"Opazeni kvantili\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/nezavisni-provjera-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkratki <- articles_kd |> filter(length_category == \"kratki\") |> pull(comprehension_no_visual)\ndugi <- articles_kd |> filter(length_category == \"dugi\") |> pull(comprehension_no_visual)\n\n# Welchov t-test (default)\ntest_kd <- t.test(kratki, dugi)\ntest_kd\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  kratki and dugi\nt = -0.066898, df = 51.86, p-value = 0.9469\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -0.8505416  0.7956635\nsample estimates:\nmean of x mean of y \n 6.097561  6.125000 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Cohenov d za nezavisni test\nn1 <- length(kratki); n2 <- length(dugi)\ns_pooled <- sqrt(((n1-1)*sd(kratki)^2 + (n2-1)*sd(dugi)^2) / (n1+n2-2))\nd_kd <- (mean(kratki) - mean(dugi)) / s_pooled\n\ncat(\"\\nCohenov d:\", round(d_kd, 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCohenov d: -0.02 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\narticles_kd |>\n  ggplot(aes(x = length_category, y = comprehension_no_visual, fill = length_category)) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +\n  geom_jitter(width = 0.15, alpha = 0.3, size = 2) +\n  scale_fill_manual(values = c(\"kratki\" = \"#2a9d8f\", \"dugi\" = \"#e76f51\")) +\n  labs(\n    title = \"Razumijevanje po duzini clanka (bez vizuala)\",\n    subtitle = paste0(\"Welchov t-test: t(\", round(test_kd$parameter, 1), \") = \", \n                      round(test_kd$statistic, 2), \n                      \", p = \", round(test_kd$p.value, 3),\n                      \", d = \", round(d_kd, 2)),\n    x = NULL,\n    y = \"Razumijevanje (0-10)\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/nezavisni-vizualizacija-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nAko je p > 0.05, to ne znači da dužina članka nema utjecaja. Možda je uzorak premali da detektira razliku, ili je stvarna razlika vrlo mala. Provjerimo snagu testa.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Kolika je snaga ovog testa za detektiranje srednjeg ucinka?\npower_kd <- power.t.test(\n  n = min(n1, n2),\n  delta = 0.5,\n  sd = 1,\n  sig.level = 0.05,\n  type = \"two.sample\"\n)\n\ncat(\"Snaga za srednji ucinak (d = 0.5) s n =\", min(n1, n2), \"po grupi:\", \n    round(power_kd$power, 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSnaga za srednji ucinak (d = 0.5) s n = 24 po grupi: 0.4 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Za 80% snagu trebamo n =\", \n    ceiling(power.t.test(delta = 0.5, sd = 1, sig.level = 0.05, power = 0.80, \n                         type = \"two.sample\")$n), \"po grupi\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nZa 80% snagu trebamo n = 64 po grupi\n```\n\n\n:::\n:::\n\n\n---\n\n## Utjecaj outliera {#sec-outlieri}\n\nT-test koristi prosjek koji je osjetljiv na ekstremne vrijednosti. Jedan outlier može značajno promijeniti rezultat.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Simulacija: normalni podaci + jedan outlier\nnormalni <- rnorm(30, mean = 5, sd = 1)\ns_outlierom <- c(normalni, 25)  # ekstremna vrijednost\n\ncat(\"BEZ outliera:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nBEZ outliera:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  M =\", round(mean(normalni), 2), \", SD =\", round(sd(normalni), 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  M = 5.07 , SD = 1.26 \n```\n\n\n:::\n\n```{.r .cell-code}\nt_bez <- t.test(normalni, mu = 5)\ncat(\"  t =\", round(t_bez$statistic, 2), \", p =\", round(t_bez$p.value, 4), \"\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  t = 0.3 , p = 0.7668 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"S OUTLIEROM:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nS OUTLIEROM:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  M =\", round(mean(s_outlierom), 2), \", SD =\", round(sd(s_outlierom), 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  M = 5.71 , SD = 3.79 \n```\n\n\n:::\n\n```{.r .cell-code}\nt_s <- t.test(s_outlierom, mu = 5)\ncat(\"  t =\", round(t_s$statistic, 2), \", p =\", round(t_s$p.value, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  t = 1.05 , p = 0.3038 \n```\n\n\n:::\n:::\n\n\nJedan outlier je pomaknuo prosjek i potpuno promijenio SD. Rezultat testa može biti sasvim drugačiji.\n\n### Detekcija outliera\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Na nasim podacima: outlieri u razlikama vremena citanja\nz_diff <- scale(articles$diff_time)\n\noutlieri <- articles |>\n  mutate(z = as.numeric(z_diff)) |>\n  filter(abs(z) > 2.5)\n\ncat(\"Clanci s |z| > 2.5 za razliku u vremenu citanja:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nClanci s |z| > 2.5 za razliku u vremenu citanja:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Broj outliera:\", nrow(outlieri), \"od\", nrow(articles), \"\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nBroj outliera: 3 od 120 \n```\n\n\n:::\n\n```{.r .cell-code}\nif (nrow(outlieri) > 0) {\n  outlieri |>\n    select(article_id, category, diff_time, z) |>\n    mutate(z = round(z, 2), diff_time = round(diff_time, 2))\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 x 4\n  article_id category    diff_time     z\n       <dbl> <chr>           <dbl> <dbl>\n1         10 kultura           3.4  5.12\n2         31 tehnologija       2.2  2.94\n3         62 sport             2.1  2.75\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Usporedba: s outlierima vs bez\nbez_outliera <- articles |> filter(abs(as.numeric(z_diff)) <= 2.5)\n\nt_svi <- t.test(articles$reading_time_with_visual, articles$reading_time_no_visual, paired = TRUE)\nt_bez_o <- t.test(bez_outliera$reading_time_with_visual, bez_outliera$reading_time_no_visual, paired = TRUE)\n\ntibble(\n  analiza = c(\"Svi clanci\", \"Bez outliera (|z| > 2.5)\"),\n  n = c(nrow(articles), nrow(bez_outliera)),\n  M_diff = round(c(mean(articles$diff_time), mean(bez_outliera$diff_time)), 3),\n  t = round(c(t_svi$statistic, t_bez_o$statistic), 2),\n  p = format(c(t_svi$p.value, t_bez_o$p.value), scientific = TRUE, digits = 2)\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 x 5\n  analiza                      n M_diff     t p      \n  <chr>                    <int>  <dbl> <dbl> <chr>  \n1 Svi clanci                 120  0.589  11.8 1.1e-21\n2 Bez outliera (|z| > 2.5)   117  0.538  13.2 9.5e-25\n```\n\n\n:::\n:::\n\n\nU ovom slučaju, uklanjanje outliera ne mijenja zaključak. Ali važno je provjeriti, jer u nekim situacijama može.\n\n### Robusne alternative: trimmed means\n\nUmjesto uklanjanja outliera (što je subjektivno), možemo koristiti **trimmed means** (podrezane prosjeke) koji automatski ignoriraju ekstremne vrijednosti.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Obicni prosjek vs 10% trimmed mean\ncat(\"Obicni prosjek razlika:\", round(mean(articles$diff_time), 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nObicni prosjek razlika: 0.589 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"10% trimmed mean razlika:\", round(mean(articles$diff_time, trim = 0.10), 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n10% trimmed mean razlika: 0.54 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"20% trimmed mean razlika:\", round(mean(articles$diff_time, trim = 0.20), 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n20% trimmed mean razlika: 0.522 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Bootstrap za robustan CI\nset.seed(42)\nboot_diffs <- map_dbl(1:5000, \\(i) {\n  idx <- sample(1:nrow(articles), nrow(articles), replace = TRUE)\n  mean(articles$diff_time[idx], trim = 0.10)\n})\n\nboot_ci <- quantile(boot_diffs, c(0.025, 0.975))\ncat(\"\\nBootstrap 95% CI za 10% trimmed mean: [\", round(boot_ci[1], 3), \",\", round(boot_ci[2], 3), \"]\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nBootstrap 95% CI za 10% trimmed mean: [ 0.454 , 0.631 ]\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Sadrzi 0:\", boot_ci[1] <= 0 & boot_ci[2] >= 0, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSadrzi 0: FALSE \n```\n\n\n:::\n:::\n\n\n::: {.callout-tip}\n## Strategija za outliere\n\n1. Identificirajte outliere vizualno (boxplot, histogram) i numerički (|z| > 2.5 ili |z| > 3).\n2. Pokušajte razumjeti zašto su ekstremni (greška u podacima? stvarno neobično opažanje?).\n3. Provedite analizu s i bez outliera. Ako zaključci ostaju isti, outlieri nisu problematični.\n4. Ako se zaključci mijenjaju, koristite robusne metode (trimmed means, bootstrap, Wilcoxon) i izvijestite oboje.\n:::\n\n---\n\n## Formula pristup: t-test s formulom {#sec-formula}\n\nDo sada smo koristili `t.test(x, y)` sintaksu. R podržava i **formula pristup** koji je elegantniji za nezavisni t-test i konzistentan s budućim modelima (ANOVA, regresija).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Podatke moramo prebaciti u dugi format za formula pristup\narticles_long <- articles |>\n  select(article_id, category, length_category,\n         reading_time_no_visual, reading_time_with_visual) |>\n  pivot_longer(\n    cols = c(reading_time_no_visual, reading_time_with_visual),\n    names_to = \"uvjet\",\n    values_to = \"reading_time\"\n  ) |>\n  mutate(uvjet = if_else(str_detect(uvjet, \"no\"), \"bez_vizuala\", \"s_vizualima\"))\n\n# Formula pristup za nezavisni test (NAPOMENA: ovo NIJE pravi test jer su podaci upareni)\n# Ovo je samo demonstracija sintakse\nt.test(reading_time ~ uvjet, data = articles_long)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  reading_time by uvjet\nt = -2.2716, df = 230.92, p-value = 0.02403\nalternative hypothesis: true difference in means between group bez_vizuala and group s_vizualima is not equal to 0\n95 percent confidence interval:\n -1.10017401 -0.07815933\nsample estimates:\nmean in group bez_vizuala mean in group s_vizualima \n                 3.426667                  4.015833 \n```\n\n\n:::\n:::\n\n\nFormula `y ~ grupa` čita se \"y ovisi o grupi.\" Ova sintaksa će biti ključna na sljedećem predavanju o ANOVI, gdje ćemo uspoređivati više od dvije grupe.\n\n::: {.callout-warning}\n## Upozorenje\n\nFormula pristup `t.test(y ~ grupa)` provodi NEZAVISNI t-test. Za upareni test morate koristiti `t.test(x, y, paired = TRUE)` sintaksu. Ne postoji formula pristup za upareni t-test u base R-u. Ovo je česta greška: korištenje formule na uparenim podacima daje pogrešne rezultate jer ignorira parove.\n:::\n\n---\n\n## Potpuna analiza: izvještaj za uredništvo {#sec-analiza}\n\nSpojimo sve u profesionalni izvještaj. Cilj: dati uredništvu jasnu preporuku temeljenu na podacima.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Opisna statistika po uvjetu, kompaktni format\ntribble(\n  ~ishod, ~M_bez, ~SD_bez, ~M_s, ~SD_s,\n  \"Vrijeme citanja (min)\", \n    round(mean(articles$reading_time_no_visual), 2), round(sd(articles$reading_time_no_visual), 2),\n    round(mean(articles$reading_time_with_visual), 2), round(sd(articles$reading_time_with_visual), 2),\n  \"Razumijevanje (0-10)\", \n    round(mean(articles$comprehension_no_visual), 2), round(sd(articles$comprehension_no_visual), 2),\n    round(mean(articles$comprehension_with_visual), 2), round(sd(articles$comprehension_with_visual), 2),\n  \"Namjera dijeljenja (1-5)\", \n    round(mean(articles$sharing_no_visual), 2), round(sd(articles$sharing_no_visual), 2),\n    round(mean(articles$sharing_with_visual), 2), round(sd(articles$sharing_with_visual), 2),\n  \"Vjerodostojnost (1-7)\", \n    round(mean(articles$credibility_no_visual), 2), round(sd(articles$credibility_no_visual), 2),\n    round(mean(articles$credibility_with_visual), 2), round(sd(articles$credibility_with_visual), 2)\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 5\n  ishod                    M_bez SD_bez   M_s  SD_s\n  <chr>                    <dbl>  <dbl> <dbl> <dbl>\n1 Vrijeme citanja (min)     3.43   1.82  4.02  2.18\n2 Razumijevanje (0-10)      5.94   1.57  6.74  1.65\n3 Namjera dijeljenja (1-5)  2.48   0.96  3.15  0.93\n4 Vjerodostojnost (1-7)     4.41   1.16  4.64  1.34\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Svi upareni t-testovi s kompletnim izvjestajima\nishodi <- list(\n  list(with = \"reading_time_with_visual\", no = \"reading_time_no_visual\", \n       naziv = \"Vrijeme citanja (min)\"),\n  list(with = \"comprehension_with_visual\", no = \"comprehension_no_visual\", \n       naziv = \"Razumijevanje (0-10)\"),\n  list(with = \"sharing_with_visual\", no = \"sharing_no_visual\", \n       naziv = \"Namjera dijeljenja (1-5)\"),\n  list(with = \"credibility_with_visual\", no = \"credibility_no_visual\", \n       naziv = \"Vjerodostojnost (1-7)\")\n)\n\nkompletni_rezultati <- map_df(ishodi, \\(ishod) {\n  x <- articles[[ishod$with]]\n  y <- articles[[ishod$no]]\n  diff <- x - y\n  \n  t_rez <- t.test(x, y, paired = TRUE)\n  w_rez <- wilcox.test(x, y, paired = TRUE)\n  d_val <- mean(diff) / sd(diff)\n  shap_p <- shapiro.test(diff)$p.value\n  \n  tibble(\n    ishod = ishod$naziv,\n    M_bez = round(mean(y), 2),\n    M_s = round(mean(x), 2),\n    razlika = round(mean(diff), 2),\n    t = round(t_rez$statistic, 2),\n    df = t_rez$parameter,\n    p_t = t_rez$p.value,\n    p_w = w_rez$p.value,\n    d = round(d_val, 2),\n    CI_lo = round(t_rez$conf.int[1], 2),\n    CI_hi = round(t_rez$conf.int[2], 2),\n    shapiro_p = round(shap_p, 3)\n  )\n})\n\nkompletni_rezultati |>\n  mutate(p_t = format(p_t, scientific = TRUE, digits = 2),\n         p_w = format(p_w, scientific = TRUE, digits = 2)) |>\n  select(ishod, M_bez, M_s, razlika, t, p_t, d, CI_lo, CI_hi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 9\n  ishod                    M_bez   M_s razlika     t p_t         d CI_lo CI_hi\n  <chr>                    <dbl> <dbl>   <dbl> <dbl> <chr>   <dbl> <dbl> <dbl>\n1 Vrijeme citanja (min)     3.43  4.02    0.59 11.8  1.1e-21  1.07  0.49  0.69\n2 Razumijevanje (0-10)      5.94  6.74    0.8  16.1  1.1e-31  1.47  0.7   0.9 \n3 Namjera dijeljenja (1-5)  2.48  3.15    0.67  5.49 2.3e-07  0.5   0.43  0.91\n4 Vjerodostojnost (1-7)     4.41  4.64    0.23  3.81 2.2e-04  0.35  0.11  0.35\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Boxplot za sve ishode\narticles |>\n  select(article_id, \n         `Vrijeme citanja_Bez` = reading_time_no_visual,\n         `Vrijeme citanja_S vizualima` = reading_time_with_visual,\n         `Razumijevanje_Bez` = comprehension_no_visual,\n         `Razumijevanje_S vizualima` = comprehension_with_visual,\n         `Dijeljenje_Bez` = sharing_no_visual,\n         `Dijeljenje_S vizualima` = sharing_with_visual,\n         `Vjerodostojnost_Bez` = credibility_no_visual,\n         `Vjerodostojnost_S vizualima` = credibility_with_visual) |>\n  pivot_longer(-article_id) |>\n  separate(name, into = c(\"ishod\", \"uvjet\"), sep = \"_\") |>\n  ggplot(aes(x = uvjet, y = value, fill = uvjet)) +\n  geom_boxplot(alpha = 0.7, outlier.alpha = 0.3) +\n  facet_wrap(~ishod, scales = \"free_y\") +\n  scale_fill_manual(values = c(\"Bez\" = \"#e76f51\", \"S vizualima\" = \"#2a9d8f\")) +\n  labs(\n    title = \"Efekt vizuala na cetiri ishoda\",\n    subtitle = \"Vizuali poboljsavaju sve ishode. Najjaci efekt na razumijevanje.\",\n    x = NULL, y = NULL, fill = NULL\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/analiza-vizualizacija-kompletna-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Moderira li duzina clanka efekt vizuala na razumijevanje?\narticles |>\n  group_by(length_category) |>\n  summarise(\n    n = n(),\n    M_diff = mean(diff_comp),\n    SE = sd(diff_comp) / sqrt(n()),\n    d = round(mean(diff_comp) / sd(diff_comp), 2),\n    .groups = \"drop\"\n  ) |>\n  mutate(length_category = fct_relevel(length_category, \"kratki\", \"srednji\", \"dugi\")) |>\n  ggplot(aes(y = length_category)) +\n  geom_errorbarh(aes(xmin = M_diff - 1.96 * SE, xmax = M_diff + 1.96 * SE), \n                 height = 0.3, linewidth = 1, color = \"steelblue\") +\n  geom_point(aes(x = M_diff), size = 3, color = \"steelblue\") +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"grey50\") +\n  geom_text(aes(x = M_diff + 1.96 * SE + 0.1, label = paste0(\"d = \", d)), hjust = 0) +\n  labs(\n    title = \"Efekt vizuala na razumijevanje po duzini clanka\",\n    subtitle = \"Vizuali pomazu kod svih duzina, s Cohenovim d za svaku kategoriju.\",\n    x = \"Poboljsanje razumijevanja (bodovi)\",\n    y = NULL\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/analiza-po-duzini-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Interakcija: kategorija clanka x uvjet za razumijevanje\narticles |>\n  group_by(category) |>\n  summarise(\n    n = n(),\n    M_diff_comp = mean(diff_comp),\n    SE = sd(diff_comp) / sqrt(n()),\n    t = round(t.test(comprehension_with_visual, comprehension_no_visual, paired = TRUE)$statistic, 2),\n    p = t.test(comprehension_with_visual, comprehension_no_visual, paired = TRUE)$p.value,\n    d = round(mean(diff_comp) / sd(diff_comp), 2),\n    .groups = \"drop\"\n  ) |>\n  mutate(\n    category = fct_reorder(category, M_diff_comp),\n    znacajno = p < 0.05,\n    p_label = if_else(p < 0.001, \"p < .001\", paste0(\"p = \", round(p, 3)))\n  ) |>\n  ggplot(aes(y = category)) +\n  geom_errorbarh(aes(xmin = M_diff_comp - 1.96 * SE, xmax = M_diff_comp + 1.96 * SE,\n                      color = znacajno), height = 0.3, linewidth = 1) +\n  geom_point(aes(x = M_diff_comp, color = znacajno), size = 3) +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"grey50\") +\n  scale_color_manual(values = c(\"TRUE\" = \"#2a9d8f\", \"FALSE\" = \"#e76f51\"),\n                     labels = c(\"TRUE\" = \"p < .05\", \"FALSE\" = \"p >= .05\")) +\n  labs(\n    title = \"Efekt vizuala na razumijevanje po kategoriji clanka\",\n    subtitle = \"Zeleno = statisticki znacajno. Vizuali pomazu u vecini kategorija.\",\n    x = \"Poboljsanje razumijevanja (bodovi, 0-10 skala)\",\n    y = NULL,\n    color = NULL\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-12_files/figure-pdf/analiza-po-kategoriji-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"================================================================\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n================================================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"   IZVJESTAJ: UTJECAJ VIZUALA NA CITATELJSKO ISKUSTVO\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   IZVJESTAJ: UTJECAJ VIZUALA NA CITATELJSKO ISKUSTVO\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"================================================================\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n================================================================\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"DIZAJN: Within-subjects eksperiment. 120 clanaka prezentirano\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDIZAJN: Within-subjects eksperiment. 120 clanaka prezentirano\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"u dva uvjeta (s vizualima i bez). Cetiri ishoda mjerena.\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nu dva uvjeta (s vizualima i bez). Cetiri ishoda mjerena.\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"GLAVNI NALAZI:\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGLAVNI NALAZI:\n```\n\n\n:::\n\n```{.r .cell-code}\nfor (i in 1:nrow(kompletni_rezultati)) {\n  r <- kompletni_rezultati[i, ]\n  smjer <- if_else(r$razlika > 0, \"povecavaju\", \"smanjuju\")\n  cat(i, \". \", r$ishod, \": Vizuali \", smjer, \" za \", abs(r$razlika), \n      \" bodova.\\n\", sep = \"\")\n  cat(\"   t(\", r$df, \") = \", r$t, \", p \", \n      if_else(r$p_t < 0.001, \"< .001\", paste0(\"= \", round(r$p_t, 3))),\n      \", d = \", r$d, \" (\", \n      case_when(abs(r$d) >= 0.8 ~ \"veliki\", abs(r$d) >= 0.5 ~ \"srednji\", \n                abs(r$d) >= 0.2 ~ \"mali\", .default = \"zanemariv\"),\n      \" ucinak)\\n\", sep = \"\")\n  cat(\"   95% CI: [\", r$CI_lo, \", \", r$CI_hi, \"]\\n\\n\", sep = \"\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n1. Vrijeme citanja (min): Vizuali povecavaju za 0.59 bodova.\n   t(119) = 11.76, p < .001, d = 1.07 (veliki ucinak)\n   95% CI: [0.49, 0.69]\n\n2. Razumijevanje (0-10): Vizuali povecavaju za 0.8 bodova.\n   t(119) = 16.11, p < .001, d = 1.47 (veliki ucinak)\n   95% CI: [0.7, 0.9]\n\n3. Namjera dijeljenja (1-5): Vizuali povecavaju za 0.67 bodova.\n   t(119) = 5.49, p < .001, d = 0.5 (srednji ucinak)\n   95% CI: [0.43, 0.91]\n\n4. Vjerodostojnost (1-7): Vizuali povecavaju za 0.23 bodova.\n   t(119) = 3.81, p < .001, d = 0.35 (mali ucinak)\n   95% CI: [0.11, 0.35]\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"PROVJERA PRETPOSTAVKI:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPROVJERA PRETPOSTAVKI:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Normalnost razlika: Shapiro-Wilk prolazi za vrijeme citanja\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Normalnost razlika: Shapiro-Wilk prolazi za vrijeme citanja\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  i razumijevanje. Likert varijable provjerene Wilcoxonovim\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  i razumijevanje. Likert varijable provjerene Wilcoxonovim\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  testom (zakljucci konzistentni s t-testom).\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  testom (zakljucci konzistentni s t-testom).\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"MODERACIJA:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMODERACIJA:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Efekt vizuala na razumijevanje je konzistentan preko svih\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Efekt vizuala na razumijevanje je konzistentan preko svih\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  kategorija clanaka i svih duzina.\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  kategorija clanaka i svih duzina.\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"PREPORUKA:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPREPORUKA:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Implementirajte vizualne elemente u sve clanke na portalu.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Implementirajte vizualne elemente u sve clanke na portalu.\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Prioritet: clanci o zdravlju i tehnologiji gdje je vizualno\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Prioritet: clanci o zdravlju i tehnologiji gdje je vizualno\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  pojasnjenje najkorisnije. Ocekivani ucinak: znacajno bolje\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  pojasnjenje najkorisnije. Ocekivani ucinak: znacajno bolje\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  razumijevanje (d > 0.8) i duze vrijeme na stranici.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  razumijevanje (d > 0.8) i duze vrijeme na stranici.\n```\n\n\n:::\n:::\n\n\n---\n\n## Dijagram odlučivanja: koji test odabrati? {#sec-dijagram}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~pitanje, ~odgovor, ~test,\n  \"Koliko grupa usporedujete?\", \"Jedna grupa vs poznata vrijednost\", \"Jednouzorački t-test\",\n  \"Koliko grupa usporedujete?\", \"Dvije nezavisne grupe\", \"Nezavisni (Welchov) t-test\",\n  \"Koliko grupa usporedujete?\", \"Ista jedinica, dva mjerenja\", \"Upareni t-test\",\n  \"Koliko grupa usporedujete?\", \"Tri ili vise grupa\", \"ANOVA (sljedeci tjedan)\",\n  \"Normalnost narusena?\", \"Da, mali uzorak (n < 30)\", \"Wilcoxonov test\",\n  \"Normalnost narusena?\", \"Ne, ili n >= 30\", \"t-test (CLT pomaze)\",\n  \"Varijable su kategoricke?\", \"Da, obje kategoricke\", \"Hi-kvadrat test (tjedan 11)\",\n  \"Varijable su kategoricke?\", \"Jedna kategoricka, jedna numericka\", \"t-test ili ANOVA\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 x 3\n  pitanje                    odgovor                            test            \n  <chr>                      <chr>                              <chr>           \n1 Koliko grupa usporedujete? Jedna grupa vs poznata vrijednost  Jednouzorački t~\n2 Koliko grupa usporedujete? Dvije nezavisne grupe              Nezavisni (Welc~\n3 Koliko grupa usporedujete? Ista jedinica, dva mjerenja        Upareni t-test  \n4 Koliko grupa usporedujete? Tri ili vise grupa                 ANOVA (sljedeci~\n5 Normalnost narusena?       Da, mali uzorak (n < 30)           Wilcoxonov test \n6 Normalnost narusena?       Ne, ili n >= 30                    t-test (CLT pom~\n7 Varijable su kategoricke?  Da, obje kategoricke               Hi-kvadrat test~\n8 Varijable su kategoricke?  Jedna kategoricka, jedna numericka t-test ili ANOVA\n```\n\n\n:::\n:::\n\n\n---\n\n## Usporedba svih t-testova na jednom mjestu {#sec-usporedba-svih}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~element, ~jednouzorački, ~nezavisni, ~upareni,\n  \"H0\", \"mu = mu_0\", \"mu_1 = mu_2\", \"mu_diff = 0\",\n  \"R kod\", \"t.test(x, mu = ...)\", \"t.test(x, y)\", \"t.test(x, y, paired = TRUE)\",\n  \"Formula\", \"nema\", \"t.test(y ~ grupa)\", \"nema\",\n  \"Cohenov d\", \"d = (M - mu_0) / s\", \"d = (M1 - M2) / s_pooled\", \"d = M_diff / SD_diff\",\n  \"Normalnost?\", \"x normalno\", \"x1 i x2 normalno\", \"razlike normalno\",\n  \"Wilcoxon\", \"wilcox.test(x, mu = ...)\", \"wilcox.test(x, y)\", \"wilcox.test(x, y, paired = TRUE)\",\n  \"Primjer\", \"Prosjek vs norma\", \"Muski vs zenski\", \"Prije vs poslije\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 x 4\n  element     jednouzorački            nezavisni                upareni         \n  <chr>       <chr>                    <chr>                    <chr>           \n1 H0          mu = mu_0                mu_1 = mu_2              mu_diff = 0     \n2 R kod       t.test(x, mu = ...)      t.test(x, y)             t.test(x, y, pa~\n3 Formula     nema                     t.test(y ~ grupa)        nema            \n4 Cohenov d   d = (M - mu_0) / s       d = (M1 - M2) / s_pooled d = M_diff / SD~\n5 Normalnost? x normalno               x1 i x2 normalno         razlike normalno\n6 Wilcoxon    wilcox.test(x, mu = ...) wilcox.test(x, y)        wilcox.test(x, ~\n7 Primjer     Prosjek vs norma         Muski vs zenski          Prije vs poslije\n```\n\n\n:::\n:::\n\n\n---\n\n::: {.callout-important}\n## Ključni zaključci\n\n1. Odaberite pravi t-test prema dizajnu: jednouzorački (jedna grupa vs poznata vrijednost), nezavisni (dvije nezavisne grupe), upareni (iste jedinice u dva uvjeta).\n\n2. Pretpostavke t-testa: normalnost (ili n > 30 za CLT), nezavisnost, intervalna skala. Za nezavisni test: jednake varijance (ili Welchov test kao default).\n\n3. Normalnost provjeravajte vizualno (QQ plot) i formalno (Shapiro-Wilk). Za upareni test, provjeravajte normalnost RAZLIKA. Shapiro-Wilk s velikim n detektira trivijalna odstupanja pa je vizualna procjena jednako važna.\n\n4. Welchov t-test (default u R-u) ne zahtijeva jednake varijance i trebao bi biti standardni izbor za nezavisne uzorke. Nema razloga koristiti Studentov test.\n\n5. Wilcoxonov test je neparametrijska alternativa za mali n s nenormalnim podacima, ordinalne podatke ili podatke s ekstremnim outlierima. Za n > 50 s umjerenom normalnosti, t-test je dovoljno robustan.\n\n6. Cohenov d: za upareni test d = M_razlika / SD_razlika, za nezavisni test d = (M1 minus M2) / s_pooled. Smjernice: 0.2 mali, 0.5 srednji, 0.8 veliki.\n\n7. APA format: opis smjera riječima, prosjeci i SD obiju grupa, t(df) = vrijednost, p-vrijednost, Cohenov d. `apa_paired()` funkcija automatizira ovaj format.\n\n8. Outlieri mogu dramatično utjecati na rezultate. Identificirajte ih (|z| > 2.5), analizirajte s i bez njih, koristite robusne metode (trimmed means, bootstrap) ako se zaključci razlikuju.\n\n9. Formula pristup `t.test(y ~ grupa)` koristi se SAMO za nezavisni test. Ne koristite ga za upareni test jer ignorira parove i daje pogrešne rezultate.\n\n10. Forest plot je standardni način prikaza višestrukih veličina učinka s intervalima pouzdanosti. Idealan za usporedbu efekata na više ishoda u jednom grafu.\n\n11. Snaga testa ovisi o veličini uzorka, veličini učinka i alfa. Uvijek provjerite imate li dovoljno snage prije nego zaključite da \"nema razlike.\" `power.t.test()` računa potreban n.\n\n12. Kompletni izvještaj uključuje dizajn studije, opisnu statistiku, provjeru pretpostavki (normalnost, outlieri), statističke testove s veličinom učinka i CI, moderacijske analize (po kategorijama, po dužini) i praktičnu preporuku.\n:::\n\n---\n\n## Zadaci za pripremu\n\n1. Učitajte `article_visuals.csv`. Provedite nezavisni t-test za usporedbu razumijevanja (s vizualima) između članaka o zdravlju i članaka o sportu. Izračunajte Cohenov d i napišite rezultat u APA formatu.\n\n2. Za varijablu `credibility_with_visual`, usporedite upareni t-test s Wilcoxonovim testom. Jesu li zaključci konzistentni? Provjerite normalnost razlika QQ plotom.\n\n3. Napišite funkciju `kompletni_ttest(data, var_with, var_no, naziv)` koja automatski provjerava normalnost (Shapiro-Wilk), odabire parametrijski ili neparametrijski test, računa Cohenov d i generira APA rečenicu.\n\n---\n\n## Dodatno čitanje\n\n**Obavezno**\n\nNavarro, D. (2018). *Learning Statistics with R*, Chapter 13 (Comparing Two Means). Besplatno dostupno na [learningstatisticswithr.com](https://learningstatisticswithr.com/lsr-0.6.pdf). Detaljan pregled t-testova, pretpostavki i alternativa.\n\n**Preporučeno**\n\nField, A. (2018). *Discovering Statistics Using R*. SAGE. Poglavlje 9. Praktičan pristup t-testovima s naglaskom na provjeru pretpostavki i efektivne vizualizacije.\n\nLakens, D. (2013). Calculating and reporting effect sizes to facilitate cumulative science. *Frontiers in Psychology*, 4, 863. Praktičan vodič za izračun i izvještavanje veličina učinka.\n\n---\n\n## Pojmovnik\n\n| Pojam | Objašnjenje |\n|---|---|\n| Upareni t-test | Test za usporedbu dvaju mjerenja na istim jedinicama. Testira prosjek razlika. `t.test(x, y, paired = TRUE)`. |\n| Nezavisni t-test | Test za usporedbu prosjeka dviju nezavisnih grupa. Default u R-u je Welchov. `t.test(x, y)`. |\n| Jednouzorački t-test | Test za usporedbu jednog prosjeka s poznatom vrijednošću. `t.test(x, mu = vrijednost)`. |\n| Welchov t-test | Varijanta nezavisnog t-testa koja ne pretpostavlja jednake varijance. Default u R-u. Uvijek bolji izbor. |\n| Normalnost | Pretpostavka normalne distribucije. Za upareni test: normalnost razlika, ne pojedinačnih mjerenja. |\n| Shapiro-Wilkov test | Formalni test normalnosti. `shapiro.test(x)`. H0: podaci su normalni. S velikim n previše osjetljiv. |\n| QQ plot | Dijagnostički graf: točke blizu linije = normalno. `stat_qq()` + `stat_qq_line()` u ggplot2. |\n| Homogenost varijance | Pretpostavka jednakih varijanci u grupama. Potrebna samo za Studentov (ne Welchov) t-test. |\n| Wilcoxonov signed-rank test | Neparametrijska alternativa uparenom t-testu. `wilcox.test(x, y, paired = TRUE)`. |\n| Mann-Whitney U test | Neparametrijska alternativa nezavisnom t-testu. `wilcox.test(x, y)`. Isto kao rank-sum test. |\n| Cohenov d (upareni) | d = M_razlika / SD_razlika. Standardizirana mjera veličine učinka za uparene podatke. |\n| Cohenov d (nezavisni) | d = (M1 minus M2) / s_pooled. Standardizirana mjera veličine učinka za nezavisne grupe. |\n| Pooled SD | Zajednička SD dviju grupa ponderirana njihovim veličinama uzoraka. |\n| Forest plot | Graf za prikaz višestrukih veličina učinka s intervalima pouzdanosti. Standardan u meta-analizama. |\n| Trimmed mean | Prosjek koji ignorira ekstremne vrijednosti (npr. 10% s oba kraja). `mean(x, trim = 0.10)`. |\n| Outlier | Opažanje ekstremno udaljeno od ostatka. Identifikacija: |z| > 2.5, boxplot, ili Cookova udaljenost. |\n| APA format | Standardizirani format izvještavanja: M, SD, t(df), p, d. Koristi se u komunikologiji i psihologiji. |\n| Formula pristup | `t.test(y ~ grupa)` sintaksa za nezavisni test. Konzistentno s ANOVA i regresijom. NE za upareni test. |\n| Bootstrap | Metoda ponovnog uzorkovanja s vraćanjem za robustan CI. Ne pretpostavlja normalnost. |\n| `shapiro.test()` | R funkcija za Shapiro-Wilkov test normalnosti. Prima vektor numeričkih podataka. |\n| `wilcox.test()` | R funkcija za Wilcoxonov test. Argumenti isti kao `t.test()`: mu, paired, alternative. |\n| `power.t.test()` | R funkcija za analizu snage t-testa. Računa n, snagu ili detektabilni učinak. |\n",
    "supporting": [
      "week-12_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}