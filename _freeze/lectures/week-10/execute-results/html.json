{
  "hash": "cc7f9cfcf6911547387311323a219334",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tjedan 10: Testiranje hipoteza\"\nsubtitle: \"Kako donijeti odluku na temelju podataka\"\ndate: 2025-04-26\ncategories: [testiranje hipoteza, p-vrijednost, t-test, greÅ¡ke tipa I i II, veliÄina uÄinka]\ndraft: false\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n::: {.callout-note}\n## Ishodi uÄenja\n\nNakon ovog predavanja moÄ‡i Ä‡ete\n\n1. Formulirati nultu i alternativnu hipotezu za istraÅ¾ivaÄko pitanje.\n2. Objasniti logiku testiranja hipoteza kroz analogiju sa suÄ‘enjem.\n3. IzraÄunati i interpretirati testnu statistiku i p-vrijednost.\n4. Provesti jednosmjerni i dvosmjerni t-test u R-u pomoÄ‡u `t.test()`.\n5. Objasniti razliku izmeÄ‘u greÅ¡ke tipa I i greÅ¡ke tipa II.\n6. IzraÄunati i interpretirati Cohenov d kao mjeru veliÄine uÄinka.\n7. Objasniti koncept statistiÄke snage i faktore koji na nju utjeÄu.\n8. KritiÄki ocijeniti statistiÄku znaÄajnost u kontekstu praktiÄne vaÅ¾nosti.\n:::\n\n## Motivacija: A/B test na Instagramu\n\nRadite kao analitiÄar u redakciji medijske kuÄ‡e. Urednica vas pita: \"Imamo li dokaz da carousel objave generiraju veÄ‡i angaÅ¾man od obiÄnih slika?\" Zadnjih nekoliko mjeseci objavljujete oba formata i sada imate podatke.\n\nProsjek angaÅ¾mana za carousel je 10.1%. Za obiÄne slike je 7.5%. Razlika postoji. Ali je li to prava razlika ili samo posljedica sluÄajnosti? MoÅ¾da bismo, da ponovimo eksperiment, dobili obrnuti rezultat?\n\nOvo je temeljno pitanje testiranja hipoteza: je li opaÅ¾ena razlika dovoljno velika da iskljuÄimo sluÄajnost kao objaÅ¡njenje?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nig <- read_csv(\"../resources/datasets/instagram_ab_test.csv\")\nglimpse(ig)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 500\nColumns: 11\n$ post_id         <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,â€¦\n$ format          <chr> \"carousel\", \"carousel\", \"carousel\", \"carousel\", \"carouâ€¦\n$ topic           <chr> \"sport\", \"tech\", \"sport\", \"vijesti\", \"kultura\", \"kultuâ€¦\n$ time_of_day     <chr> \"poslijepodne\", \"jutro\", \"veÄer\", \"poslijepodne\", \"podâ€¦\n$ has_cta         <lgl> TRUE, TRUE, FALSE, TRUE, FALSE, TRUE, TRUE, FALSE, TRUâ€¦\n$ reach           <dbl> 803, 1028, 4570, 1915, 4539, 3620, 3058, 2818, 4432, 2â€¦\n$ likes           <dbl> 48, 62, 200, 87, 428, 151, 61, 132, 212, 159, 210, 65,â€¦\n$ comments        <dbl> 14, 10, 94, 21, 47, 61, 27, 32, 108, 26, 42, 4, 30, 21â€¦\n$ shares          <dbl> 7, 8, 22, 25, 45, 50, 21, 27, 4, 14, 26, 5, 12, 14, 6,â€¦\n$ saves           <dbl> 16, 23, 49, 27, 67, 38, 30, 56, 84, 51, 28, 3, 12, 26,â€¦\n$ engagement_rate <dbl> 0.1059, 0.1002, 0.0799, 0.0836, 0.1293, 0.0829, 0.0455â€¦\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nig |>\n  group_by(format) |>\n  summarise(\n    n = n(),\n    M_engagement = round(mean(engagement_rate) * 100, 2),\n    SD_engagement = round(sd(engagement_rate) * 100, 2),\n    M_likes = round(mean(likes), 1),\n    M_comments = round(mean(comments), 1),\n    .groups = \"drop\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 6\n  format           n M_engagement SD_engagement M_likes M_comments\n  <chr>        <int>        <dbl>         <dbl>   <dbl>      <dbl>\n1 carousel       236         10.1          2.11    180.       35.7\n2 single_image   264          7.5          1.77    149.       24.4\n```\n\n\n:::\n:::\n\n\nCarousel objave imaju viÅ¡i angaÅ¾man u prosjeku. Ali svaka grupa ima i vlastitu varijabilnost. Pitanje je: kolika je Å¡ansa da bismo vidjeli ovakvu ili veÄ‡u razliku i da carousel zapravo NIJE bolji?\n\n---\n\n## Logika testiranja hipoteza {#sec-logika}\n\nTestiranje hipoteza slijedi logiku koja je sliÄna suÄ‘enju u kaznenom pravu.\n\nNa sudu, optuÅ¾enik je nevin dok se ne dokaÅ¾e krivnja. Ne trebate dokazati nevinost. Trebate dokazati krivnju izvan razumne sumnje. Ako nema dovoljno dokaza, presuda je \"nedokazano\" (ne \"nevin\").\n\nU statistici, poÄetna pretpostavka je da nema uÄinka (nema razlike, nema veze). Ovu pretpostavku zovemo **nulta hipoteza** (Hâ‚€). IstraÅ¾ivaÄ pokuÅ¡ava prikupiti dovoljno dokaza da odbaci nultu hipotezu u korist **alternativne hipoteze** (Hâ‚) koja tvrdi da uÄinak postoji.\n\nZa naÅ¡ Instagram primjer:\n\n**Hâ‚€**: Nema razlike u angaÅ¾manu izmeÄ‘u carousel i single image formata. Svaka opaÅ¾ena razlika je posljedica sluÄajnosti.\n\n**Hâ‚**: Postoji razlika u angaÅ¾manu izmeÄ‘u dva formata. OpaÅ¾ena razlika odraÅ¾ava stvarnu razliku u populaciji.\n\nMatematiÄki:\n\n$$H_0: \\mu_{carousel} = \\mu_{single}$$\n$$H_1: \\mu_{carousel} \\neq \\mu_{single}$$\n\n::: {.callout-important}\n## VaÅ¾na napomena\n\nNulta hipoteza uvijek sadrÅ¾i znak jednakosti (= ili â‰¤ ili â‰¥). Alternativna hipoteza sadrÅ¾i znak nejednakosti (â‰  ili > ili <). Nikad obrnuto. Testiramo nultu hipotezu i traÅ¾imo dokaze protiv nje.\n:::\n\n---\n\n## Od hipoteze do odluke: korak po korak {#sec-koraci}\n\nCijeli postupak testiranja hipoteza ima pet koraka.\n\n**Korak 1**: Postavite hipoteze (Hâ‚€ i Hâ‚).\n\n**Korak 2**: Odaberite razinu znaÄajnosti (Î±). To je prag ispod kojeg Ä‡ete odbaciti Hâ‚€. Konvencija je Î± = 0.05 (5%).\n\n**Korak 3**: IzraÄunajte testnu statistiku iz podataka.\n\n**Korak 4**: IzraÄunajte p-vrijednost (vjerojatnost dobivanja ovakve ili ekstremnije testne statistike pod pretpostavkom da je Hâ‚€ istinita).\n\n**Korak 5**: Donesite odluku. Ako je p < Î±, odbacite Hâ‚€. Ako je p â‰¥ Î±, ne moÅ¾ete odbaciti Hâ‚€.\n\nKrenimo korak po korak na jednostavnijem primjeru prije nego se vratimo na Instagram podatke.\n\n---\n\n## JednouzoraÄki t-test {#sec-one-sample}\n\nPoÄnimo s najjednostavnijim sluÄajem: imamo jedan uzorak i Å¾elimo testirati je li prosjek jednak nekoj zadanoj vrijednosti.\n\nSituacija: medijska kuÄ‡a tvrdi da njihovi korisnici provode prosjeÄno 3 minute ÄitajuÄ‡i Älanak. Vi ste skeptiÄni i mislite da je stvarno vrijeme Äitanja drugaÄije. Provedete mjerenje na uzorku Älanaka.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Simulirani podaci: stvarno prosjeÄno vrijeme je 2.6 minuta\nvrijeme_citanja <- tibble(\n  clanak_id = 1:45,\n  minuta = round(rnorm(45, mean = 2.6, sd = 0.9), 1)\n)\n\n# Opisna statistika\nvrijeme_citanja |>\n  summarise(\n    n = n(),\n    M = round(mean(minuta), 2),\n    SD = round(sd(minuta), 2),\n    SE = round(sd(minuta) / sqrt(n()), 3)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 Ã— 4\n      n     M    SD    SE\n  <int> <dbl> <dbl> <dbl>\n1    45  2.54  1.06 0.159\n```\n\n\n:::\n:::\n\n\nProsjek uzorka je ispod 3 minute. Ali je li dovoljno daleko od 3 da moÅ¾emo odbaciti tvrdnju medijske kuÄ‡e?\n\n### Testna statistika\n\nTestna statistika za jednouzoraÄki t-test je:\n\n$$t = \\frac{\\bar{x} - \\mu_0}{SE} = \\frac{\\bar{x} - \\mu_0}{s / \\sqrt{n}}$$\n\nOvo mjeri koliko je prosjek uzorka udaljen od pretpostavljene vrijednosti, u jedinicama standardne pogreÅ¡ke.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx_bar <- mean(vrijeme_citanja$minuta)\nmu_0 <- 3  # tvrdnja medijske kuÄ‡e\ns <- sd(vrijeme_citanja$minuta)\nn <- nrow(vrijeme_citanja)\nse <- s / sqrt(n)\n\nt_stat <- (x_bar - mu_0) / se\n\ncat(\"xÌ„ =\", round(x_bar, 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nxÌ„ = 2.54 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Î¼â‚€ =\", mu_0, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nÎ¼â‚€ = 3 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"SE =\", round(se, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSE = 0.159 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"t =\", round(t_stat, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nt = -2.911 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"df =\", n - 1, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ndf = 44 \n```\n\n\n:::\n:::\n\n\nTestna statistika t je negativna jer je prosjek uzorka manji od pretpostavljene vrijednosti. Apsolutna vrijednost |t| govori koliko standardnih pogreÅ¡aka je prosjek udaljen od Î¼â‚€. Å to veÄ‡i |t|, to jaÄi dokaz protiv Hâ‚€.\n\n### P-vrijednost\n\n**P-vrijednost** je vjerojatnost dobivanja testne statistike jednake ili ekstremnije od opaÅ¾ene, pod pretpostavkom da je Hâ‚€ istinita. To nije vjerojatnost da je Hâ‚€ istinita. To nije vjerojatnost da smo pogrijeÅ¡ili. To je vjerojatnost podataka (ili ekstremnijih) pod Hâ‚€.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Dvosmjerni test: gledamo obje strane\np_value <- 2 * pt(abs(t_stat), df = n - 1, lower.tail = FALSE)\n\nx_vals <- seq(-5, 5, length.out = 300)\n\nt_data <- tibble(x = x_vals, density = dt(x_vals, df = n - 1))\n\nggplot(t_data, aes(x = x, y = density)) +\n  geom_line(linewidth = 1) +\n  geom_area(data = t_data |> filter(x <= -abs(t_stat)),\n            fill = \"firebrick\", alpha = 0.4) +\n  geom_area(data = t_data |> filter(x >= abs(t_stat)),\n            fill = \"firebrick\", alpha = 0.4) +\n  geom_vline(xintercept = c(-abs(t_stat), abs(t_stat)), \n             color = \"firebrick\", linetype = \"dashed\") +\n  annotate(\"text\", x = t_stat - 0.3, y = 0.05, \n           label = paste(\"t =\", round(t_stat, 2)), color = \"firebrick\", hjust = 1) +\n  labs(\n    title = \"P-vrijednost je crveno osjenÄano podruÄje\",\n    subtitle = paste0(\"Dvosmjerni test. p = \", round(p_value, 4), \n                      \". Ako je p < 0.05, odbacujemo Hâ‚€.\"),\n    x = \"t-vrijednost\",\n    y = \"GustoÄ‡a\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/p-vrijednost-vizualizacija-1.png){width=768}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"t-statistika:\", round(t_stat, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nt-statistika: -2.911 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"P-vrijednost (dvosmjerni):\", round(p_value, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nP-vrijednost (dvosmjerni): 0.0056 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Î± = 0.05\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nÎ± = 0.05\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Odluka:\", if_else(p_value < 0.05, \"Odbacujemo Hâ‚€\", \"Ne moÅ¾emo odbaciti Hâ‚€\"), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOdluka: Odbacujemo Hâ‚€ \n```\n\n\n:::\n:::\n\n\n### `t.test()` radi sve automatski\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(vrijeme_citanja$minuta, mu = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tOne Sample t-test\n\ndata:  vrijeme_citanja$minuta\nt = -2.9114, df = 44, p-value = 0.005629\nalternative hypothesis: true mean is not equal to 3\n95 percent confidence interval:\n 2.217817 2.857739\nsample estimates:\nmean of x \n 2.537778 \n```\n\n\n:::\n:::\n\n\nFunkcija `t.test()` daje sve potrebne informacije: testnu statistiku, stupnjeve slobode, p-vrijednost, interval pouzdanosti i prosjek uzorka. P-vrijednost je ispod 0.05, Å¡to znaÄi da imamo dovoljno dokaza da odbacimo tvrdnju medijske kuÄ‡e da je prosjeÄno vrijeme Äitanja 3 minute.\n\n::: {.callout-tip}\n## Veza izmeÄ‘u CI i testiranja hipoteza\n\nPogledajte 95% CI iz gornjeg rezultata. Ne sadrÅ¾i vrijednost 3. Ovo nije sluÄajnost: odbacivanje Hâ‚€ na razini Î± = 0.05 je ekvivalentno tome da 95% CI ne sadrÅ¾i testiranu vrijednost Î¼â‚€. Ovo su dva naÄina gledanja na isti problem.\n:::\n\n---\n\n## Dvosmjerni vs jednosmjerni test {#sec-smjerovi}\n\nU prethodnom primjeru koristili smo **dvosmjerni test** (two-tailed): testirali smo je li prosjek razliÄit od 3, u bilo kojem smjeru. Hipoteze su bile Hâ‚€: Î¼ = 3 vs Hâ‚: Î¼ â‰  3.\n\nPonekad unaprijed znamo smjer. Ako Instagram tim oÄekuje da su carousel objave BOLJE (ne samo razliÄite), moÅ¾emo koristiti **jednosmjerni test** (one-tailed): Hâ‚€: Î¼_carousel â‰¤ Î¼_single vs Hâ‚: Î¼_carousel > Î¼_single.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Jednosmjerni: je li prosjek MANJI od 3?\nt.test(vrijeme_citanja$minuta, mu = 3, alternative = \"less\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tOne Sample t-test\n\ndata:  vrijeme_citanja$minuta\nt = -2.9114, df = 44, p-value = 0.002814\nalternative hypothesis: true mean is less than 3\n95 percent confidence interval:\n     -Inf 2.804532\nsample estimates:\nmean of x \n 2.537778 \n```\n\n\n:::\n:::\n\n\nP-vrijednost jednosmjernog testa je toÄno pola dvosmjernog (kad je smjer u skladu s podacima). Jednosmjerni test je \"osjetljiviji\" u tom smjeru, ali potpuno slijep za razliku u suprotnom smjeru.\n\n::: {.callout-warning}\n## Upozorenje\n\nJednosmjerni test koristite SAMO ako ste smjer hipoteze odredili PRIJE nego ste pogledali podatke. Ako pogledate podatke, vidite da je prosjek manji od 3 i onda odluÄite testirati \"je li manji\", to je pristranost istraÅ¾ivaÄa. Kad ste u sumnji, koristite dvosmjerni test. VeÄ‡ina publiciranih istraÅ¾ivanja koristi dvosmjerne testove.\n:::\n\n---\n\n## DvouzoraÄki t-test: Instagram A/B test {#sec-two-sample}\n\nSada se vraÄ‡amo na naÅ¡ motivacijski primjer. Å½elimo testirati razlikuje li se angaÅ¾man izmeÄ‘u carousel i single image objava. Ovo zahtijeva **dvouzoraÄki t-test** (two-sample t-test) jer usporeÄ‘ujemo prosjeke dviju nezavisnih skupina.\n\n$$H_0: \\mu_{carousel} = \\mu_{single}$$\n$$H_1: \\mu_{carousel} \\neq \\mu_{single}$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\nig |>\n  ggplot(aes(x = engagement_rate * 100, fill = format)) +\n  geom_density(alpha = 0.5) +\n  geom_vline(data = ig |> group_by(format) |> summarise(M = mean(engagement_rate) * 100),\n             aes(xintercept = M, color = format), linewidth = 1, linetype = \"dashed\") +\n  scale_fill_manual(values = c(\"carousel\" = \"#2a9d8f\", \"single_image\" = \"#e76f51\")) +\n  scale_color_manual(values = c(\"carousel\" = \"#2a9d8f\", \"single_image\" = \"#e76f51\")) +\n  labs(\n    title = \"Distribucija angaÅ¾mana po formatu objave\",\n    subtitle = \"Isprekidane linije = prosjeci. Distribucije se preklapaju ali su centri razliÄiti.\",\n    x = \"Engagement rate (%)\",\n    y = \"GustoÄ‡a\",\n    fill = \"Format\", color = \"Format\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/two-sample-vizualizacija-1.png){width=768}\n:::\n:::\n\n\nDistribucije se preklapaju, ali carousel objave su pomaknute udesno. Testna statistika za dvouzoraÄki t-test mjeri razliku prosjeka u jedinicama zajedniÄke standardne pogreÅ¡ke:\n\n$$t = \\frac{\\bar{x}_1 - \\bar{x}_2}{SE_{razlika}}$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncarousel <- ig |> filter(format == \"carousel\") |> pull(engagement_rate)\nsingle <- ig |> filter(format == \"single_image\") |> pull(engagement_rate)\n\nrezultat <- t.test(carousel, single)\nrezultat\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  carousel and single\nt = 14.942, df = 461.55, p-value < 2.2e-16\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n 0.02276184 0.02965581\nsample estimates:\n mean of x  mean of y \n0.10117966 0.07497083 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"Razlika prosjeka:\", round((mean(carousel) - mean(single)) * 100, 2), \"postotnih bodova\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRazlika prosjeka: 2.62 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"t-statistika:\", round(rezultat$statistic, 2), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nt-statistika: 14.94 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"P-vrijednost:\", format(rezultat$p.value, scientific = TRUE), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nP-vrijednost: 1.856828e-41 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"95% CI za razliku: [\", round(rezultat$conf.int[1] * 100, 2), \",\", \n    round(rezultat$conf.int[2] * 100, 2), \"] postotnih bodova\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n95% CI za razliku: [ 2.28 , 2.97 ] postotnih bodova\n```\n\n\n:::\n:::\n\n\nP-vrijednost je iznimno mala (mnogo manja od 0.05). Imamo snaÅ¾ne dokaze da se angaÅ¾man razlikuje izmeÄ‘u dva formata. Carousel objave imaju statistiÄki znaÄajno viÅ¡i angaÅ¾man.\n\n### Welchov t-test\n\nR po defaultu koristi **Welchov t-test** koji ne pretpostavlja jednake varijance u dvjema skupinama. Ovo je gotovo uvijek bolja opcija od klasiÄnog Studentovog t-testa (koji pretpostavlja jednake varijance). Welchov test je robusniji i gubi malo snage Äak i kad su varijance jednake.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Welchov (default)\nwelch <- t.test(carousel, single, var.equal = FALSE)\n\n# Studentov (pretpostavlja jednake varijance)\nstudent <- t.test(carousel, single, var.equal = TRUE)\n\ntibble(\n  test = c(\"Welch (default)\", \"Student (var.equal=TRUE)\"),\n  t = round(c(welch$statistic, student$statistic), 3),\n  df = round(c(welch$parameter, student$parameter), 1),\n  p = format(c(welch$p.value, student$p.value), scientific = TRUE, digits = 3)\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 4\n  test                         t    df p       \n  <chr>                    <dbl> <dbl> <chr>   \n1 Welch (default)           14.9  462. 1.86e-41\n2 Student (var.equal=TRUE)  15.1  498  1.27e-42\n```\n\n\n:::\n:::\n\n\nRezultati su vrlo sliÄni u ovom sluÄaju. Ali Welchov test ima nerunde stupnjeve slobode (jer ih prilagoÄ‘ava za razliku u varijancama). Koristite Welchov test kao default jer ne zahtijeva dodatnu pretpostavku.\n\n---\n\n## Simulacija: Å¡to znaÄi p-vrijednost? {#sec-simulacija-p}\n\nMnogi studenti (i istraÅ¾ivaÄi) krivo razumiju p-vrijednost. Simulacija pomaÅ¾e izgraditi ispravnu intuiciju.\n\nPretpostavimo da Hâ‚€ JEST istinita: carousel i single image imaju identiÄan angaÅ¾man. Ako mnogo puta uzorkujemo i testiramo, koliko Ä‡emo Äesto dobiti p < 0.05?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Simulacija: Hâ‚€ je ISTINITA (isti prosjek za obje grupe)\nsim_p <- map_dbl(1:10000, \\(i) {\n  grupa_a <- rnorm(100, mean = 0.08, sd = 0.02)\n  grupa_b <- rnorm(100, mean = 0.08, sd = 0.02)  # ISTI prosjek!\n  t.test(grupa_a, grupa_b)$p.value\n})\n\ncat(\"Hâ‚€ je ISTINITA. Od 10 000 testova:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nHâ‚€ je ISTINITA. Od 10 000 testova:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"p < 0.05:\", sum(sim_p < 0.05), \"(\", round(mean(sim_p < 0.05) * 100, 1), \"%)\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\np < 0.05: 497 ( 5 %)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"p < 0.01:\", sum(sim_p < 0.01), \"(\", round(mean(sim_p < 0.01) * 100, 1), \"%)\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\np < 0.01: 79 ( 0.8 %)\n```\n\n\n:::\n\n```{.r .cell-code}\ntibble(p = sim_p) |>\n  ggplot(aes(x = p)) +\n  geom_histogram(fill = \"steelblue\", color = \"white\", bins = 50) +\n  geom_vline(xintercept = 0.05, color = \"firebrick\", linewidth = 1, linetype = \"dashed\") +\n  annotate(\"text\", x = 0.06, y = 400, label = \"Î± = 0.05\", color = \"firebrick\", hjust = 0) +\n  labs(\n    title = \"Distribucija p-vrijednosti kad je Hâ‚€ ISTINITA\",\n    subtitle = \"P-vrijednosti su uniformno rasporeÄ‘ene. ~5% pada ispod 0.05.\",\n    x = \"P-vrijednost\",\n    y = \"Frekvencija\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/simulacija-h0-istinita-1.png){width=768}\n:::\n:::\n\n\nKad je Hâ‚€ istinita, p-vrijednosti su uniformno rasporeÄ‘ene izmeÄ‘u 0 i 1. ToÄno 5% pada ispod 0.05 (po definiciji Î±). Ovo znaÄi da Ä‡emo u 5% sluÄajeva pogreÅ¡no odbaciti Hâ‚€ Äak i kad je istinita. Ovo je **greÅ¡ka tipa I** (false positive, laÅ¾no pozitivni rezultat).\n\n### Kad je Hâ‚ istinita\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Simulacija: Hâ‚ je ISTINITA (razlika postoji)\nsim_p_h1 <- map_dbl(1:10000, \\(i) {\n  grupa_a <- rnorm(100, mean = 0.10, sd = 0.02)\n  grupa_b <- rnorm(100, mean = 0.08, sd = 0.02)  # RAZLIÄŒIT prosjek\n  t.test(grupa_a, grupa_b)$p.value\n})\n\ncat(\"Hâ‚ je ISTINITA (razlika = 0.02). Od 10 000 testova:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nHâ‚ je ISTINITA (razlika = 0.02). Od 10 000 testova:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"p < 0.05:\", sum(sim_p_h1 < 0.05), \"(\", round(mean(sim_p_h1 < 0.05) * 100, 1), \"%)\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\np < 0.05: 10000 ( 100 %)\n```\n\n\n:::\n\n```{.r .cell-code}\ntibble(p = sim_p_h1) |>\n  ggplot(aes(x = p)) +\n  geom_histogram(fill = \"#2a9d8f\", color = \"white\", bins = 50) +\n  geom_vline(xintercept = 0.05, color = \"firebrick\", linewidth = 1, linetype = \"dashed\") +\n  labs(\n    title = \"Distribucija p-vrijednosti kad je Hâ‚ ISTINITA\",\n    subtitle = \"VeÄ‡ina p-vrijednosti je blizu nule. Test je imao snagu detektirati razliku.\",\n    x = \"P-vrijednost\",\n    y = \"Frekvencija\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/simulacija-h1-istinita-1.png){width=768}\n:::\n:::\n\n\nKad razlika stvarno postoji, p-vrijednosti su koncentrirane blizu nule. VeÄ‡ina testova uspjeÅ¡no detektira razliku (p < 0.05). Ali ne svi. Postotak testova koji uspjeÅ¡no detektiraju pravu razliku naziva se **statistiÄka snaga** (power). Testovi koji ne detektiraju pravu razliku (p â‰¥ 0.05 iako razlika postoji) Äine **greÅ¡ku tipa II** (false negative, laÅ¾no negativni rezultat).\n\n---\n\n## GreÅ¡ka tipa I i greÅ¡ka tipa II {#sec-greske}\n\nPostoje Äetiri moguÄ‡a ishoda testiranja hipoteza, ovisno o tome je li Hâ‚€ stvarno istinita i kakvu smo odluku donijeli.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~` `, ~`Hâ‚€ je istinita`, ~`Hâ‚€ je laÅ¾na`,\n  \"Ne odbacujemo Hâ‚€\", \"âœ… Ispravna odluka (1 - Î±)\", \"âŒ GreÅ¡ka tipa II (Î²)\",\n  \"Odbacujemo Hâ‚€\", \"âŒ GreÅ¡ka tipa I (Î±)\", \"âœ… Ispravna odluka (snaga = 1 - Î²)\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 3\n  ` `              `Hâ‚€ je istinita`           `Hâ‚€ je laÅ¾na`                     \n  <chr>            <chr>                      <chr>                             \n1 Ne odbacujemo Hâ‚€ âœ… Ispravna odluka (1 - Î±) âŒ GreÅ¡ka tipa II (Î²)             \n2 Odbacujemo Hâ‚€    âŒ GreÅ¡ka tipa I (Î±)       âœ… Ispravna odluka (snaga = 1 - Î²)\n```\n\n\n:::\n:::\n\n\n**GreÅ¡ka tipa I** (Î±): Odbacimo Hâ‚€ iako je istinita. ZakljuÄimo da razlika postoji kad je zapravo nema. Kontroliramo je postavljanjem Î± (obiÄno 0.05). Analogija sa suÄ‘enjem: osuditi nevinu osobu.\n\n**GreÅ¡ka tipa II** (Î²): Ne odbacimo Hâ‚€ iako je laÅ¾na. Propustimo pravu razliku. Ovisi o veliÄini uzorka, veliÄini uÄinka i Î±. Analogija sa suÄ‘enjem: osloboditi krivca.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- seq(-4, 8, length.out = 500)\nh0 <- dnorm(x, mean = 0, sd = 1)\nh1 <- dnorm(x, mean = 3, sd = 1)\n\ncrit <- qnorm(0.975)\n\nerror_data <- tibble(x = x, H0 = h0, H1 = h1)\n\nggplot(error_data, aes(x = x)) +\n  # H0 distribucija\n  geom_line(aes(y = H0), color = \"steelblue\", linewidth = 1) +\n  geom_area(data = error_data |> filter(x >= crit), aes(y = H0),\n            fill = \"firebrick\", alpha = 0.3) +\n  # H1 distribucija\n  geom_line(aes(y = H1), color = \"#2a9d8f\", linewidth = 1) +\n  geom_area(data = error_data |> filter(x < crit), aes(y = H1),\n            fill = \"#e9c46a\", alpha = 0.3) +\n  # KritiÄna vrijednost\n  geom_vline(xintercept = crit, color = \"grey30\", linewidth = 0.8, linetype = \"dashed\") +\n  annotate(\"text\", x = 0, y = 0.42, label = \"Hâ‚€ distribucija\", color = \"steelblue\", fontface = \"bold\") +\n  annotate(\"text\", x = 3, y = 0.42, label = \"Hâ‚ distribucija\", color = \"#2a9d8f\", fontface = \"bold\") +\n  annotate(\"text\", x = 2.8, y = 0.12, label = \"GreÅ¡ka\\ntipa I (Î±)\", color = \"firebrick\") +\n  annotate(\"text\", x = 0.5, y = 0.06, label = \"GreÅ¡ka\\ntipa II (Î²)\", color = \"#c77f00\") +\n  annotate(\"text\", x = crit, y = -0.02, label = \"KritiÄna\\nvrijednost\", hjust = 0.5) +\n  labs(\n    title = \"Vizualizacija greÅ¡aka tipa I i tipa II\",\n    subtitle = \"Crveno = laÅ¾no pozitivno. Å½uto = laÅ¾no negativno. Ne moÅ¾emo smanjiti oboje istovremeno.\",\n    x = \"Testna statistika\",\n    y = \"GustoÄ‡a\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/greske-vizualizacija-1.png){width=960}\n:::\n:::\n\n\nOvaj graf pokazuje kljuÄan kompromis. Ako pomaknemo kritiÄnu vrijednost udesno (stroÅ¾iji Î±), smanjujemo crveno podruÄje (manje laÅ¾no pozitivnih) ali poveÄ‡avamo Å¾uto podruÄje (viÅ¡e laÅ¾no negativnih). Jedini naÄin da smanjimo oboje istovremeno je poveÄ‡ati uzorak (Å¡to razdvaja dvije distribucije) ili imati veÄ‡i uÄinak.\n\n::: {.callout-important}\n## VaÅ¾na napomena\n\n\"Ne moÅ¾emo odbaciti Hâ‚€\" nije isto Å¡to i \"Hâ‚€ je istinita.\" Odsutnost dokaza nije dokaz odsutnosti. MoÅ¾da razlika postoji ali je naÅ¡ uzorak premalen da je detektira. Zato nikad ne kaÅ¾emo \"prihvaÄ‡amo Hâ‚€\" nego \"ne moÅ¾emo odbaciti Hâ‚€ na temelju dostupnih podataka.\"\n:::\n\n---\n\n## P-vrijednost: Å¡to jest, a Å¡to nije {#sec-p-vrijednost}\n\nP-vrijednost je jedan od najÄeÅ¡Ä‡e koriÅ¡tenih ali i najÄeÅ¡Ä‡e pogreÅ¡no interpretiranih koncepata u statistici. Razjasnimo.\n\n**P-vrijednost JEST**: Vjerojatnost dobivanja testne statistike jednake ili ekstremnije od opaÅ¾ene, pod pretpostavkom da je Hâ‚€ istinita. Drugim rijeÄima: koliko bi bili iznenaÄ‘eni ovakvim podacima kad Hâ‚€ ne bi bila istinita?\n\n**P-vrijednost NIJE**:\n\nP-vrijednost NIJE vjerojatnost da je Hâ‚€ istinita. Ne moÅ¾emo reÄ‡i \"postoji samo 3% Å¡anse da nema razlike.\" P-vrijednost ne govori niÅ¡ta o vjerojatnosti hipoteza.\n\nP-vrijednost NIJE vjerojatnost da smo pogrijeÅ¡ili. Mala p-vrijednost znaÄi da su podaci neobiÄni pod Hâ‚€. Ne znaÄi da smo sigurno u pravu.\n\nP-vrijednost NIJE mjera veliÄine uÄinka. p = 0.001 ne znaÄi da je uÄinak velik. Velik uzorak moÅ¾e proizvesti malu p-vrijednost za trivijalno malu razliku.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Mali uzorak, velik uÄinak\nmali_uzorak <- t.test(rnorm(20, 10.5, 2), mu = 10)\n\n# Velik uzorak, siÄ‡uÅ¡an uÄinak\nvelik_uzorak <- t.test(rnorm(10000, 10.02, 2), mu = 10)\n\ntibble(\n  scenarij = c(\"Mali uzorak (n=20), velik uÄinak\", \"Velik uzorak (n=10000), siÄ‡uÅ¡an uÄinak\"),\n  n = c(20, 10000),\n  razlika = c(\"0.5 bodova\", \"0.02 boda\"),\n  p_vrijednost = c(round(mali_uzorak$p.value, 4), round(velik_uzorak$p.value, 4)),\n  znacajno = c(mali_uzorak$p.value < 0.05, velik_uzorak$p.value < 0.05)\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 5\n  scenarij                                   n razlika    p_vrijednost znacajno\n  <chr>                                  <dbl> <chr>             <dbl> <lgl>   \n1 Mali uzorak (n=20), velik uÄinak          20 0.5 bodova        0.149 FALSE   \n2 Velik uzorak (n=10000), siÄ‡uÅ¡an uÄinak 10000 0.02 boda         0.843 FALSE   \n```\n\n\n:::\n:::\n\n\nS 10 000 opaÅ¾anja, razlika od 0.02 boda (praktiÄki beznaÄajna) je statistiÄki znaÄajna. S 20 opaÅ¾anja, razlika od 0.5 bodova (potencijalno vaÅ¾na) nije statistiÄki znaÄajna. Ovo pokazuje zaÅ¡to p-vrijednost sama nije dovoljna. Uvijek trebamo i mjeru veliÄine uÄinka.\n\n---\n\n\n::: {.callout-note}\n## Podsjetnik\n\nU prvom dijelu nauÄili smo logiku testiranja hipoteza, formuliranje Hâ‚€ i Hâ‚, jednouzoraÄki i dvouzoraÄki t-test, p-vrijednost i greÅ¡ke tipa I i II. U ovom dijelu prelazimo na pitanje koje je jednako vaÅ¾no kao statistiÄka znaÄajnost: koliko je uÄinak zapravo velik?\n:::\n\n## VeliÄina uÄinka: Cohenov d {#sec-cohen-d}\n\nP-vrijednost odgovara na pitanje \"postoji li uÄinak?\" ali ne govori koliko je uÄinak velik. Za to nam treba mjera **veliÄine uÄinka** (effect size).\n\nNajÄeÅ¡Ä‡a mjera za razliku dvaju prosjeka je **Cohenov d**, koji izraÅ¾ava razliku u jedinicama zajedniÄke standardne devijacije:\n\n$$d = \\frac{\\bar{x}_1 - \\bar{x}_2}{s_{pooled}}$$\n\ngdje je $s_{pooled}$ zajedniÄka (pooled) standardna devijacija dviju grupa.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nig <- read_csv(\"../resources/datasets/instagram_ab_test.csv\")\n\ncarousel <- ig |> filter(format == \"carousel\") |> pull(engagement_rate)\nsingle <- ig |> filter(format == \"single_image\") |> pull(engagement_rate)\n\n# RuÄni izraÄun\nn1 <- length(carousel)\nn2 <- length(single)\ns_pooled <- sqrt(((n1 - 1) * sd(carousel)^2 + (n2 - 1) * sd(single)^2) / (n1 + n2 - 2))\nd <- (mean(carousel) - mean(single)) / s_pooled\n\ncat(\"Razlika prosjeka:\", round((mean(carousel) - mean(single)) * 100, 2), \"postotnih bodova\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRazlika prosjeka: 2.62 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Pooled SD:\", round(s_pooled * 100, 2), \"postotnih bodova\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPooled SD: 1.94 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Cohenov d:\", round(d, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCohenov d: 1.351 \n```\n\n\n:::\n:::\n\n\n### Interpretacija Cohenovog d\n\nCohen (1988) je predloÅ¾io smjernice za interpretaciju:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~d, ~interpretacija, ~primjer,\n  \"0.2\", \"Mali uÄinak\", \"Jedva primjetna razlika u praksi\",\n  \"0.5\", \"Srednji uÄinak\", \"Razlika vidljiva prostim okom\",\n  \"0.8\", \"Veliki uÄinak\", \"Razlika oÄita i praktiÄno vaÅ¾na\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 Ã— 3\n  d     interpretacija primjer                         \n  <chr> <chr>          <chr>                           \n1 0.2   Mali uÄinak    Jedva primjetna razlika u praksi\n2 0.5   Srednji uÄinak Razlika vidljiva prostim okom   \n3 0.8   Veliki uÄinak  Razlika oÄita i praktiÄno vaÅ¾na \n```\n\n\n:::\n:::\n\n\nNaÅ¡ d = 1.35 je velik uÄinak. Carousel objave generiraju znaÄajno viÅ¡i angaÅ¾man, i to u praktiÄno vaÅ¾noj mjeri. Ovo je informacija koju p-vrijednost sama ne daje.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Vizualizacija: Å¡to znaÄi d = 0.2, 0.5, 0.8, 1.3\nd_values <- c(0.2, 0.5, 0.8, round(d, 2))\nd_labels <- c(\"d = 0.2 (mali)\", \"d = 0.5 (srednji)\", \"d = 0.8 (veliki)\", \n              paste0(\"d = \", round(d, 2), \" (naÅ¡i podaci)\"))\n\nx <- seq(-4, 6, length.out = 300)\n\nd_viz <- map_df(seq_along(d_values), \\(i) {\n  tibble(\n    panel = d_labels[i],\n    x = x,\n    Grupa_A = dnorm(x, 0, 1),\n    Grupa_B = dnorm(x, d_values[i], 1)\n  ) |>\n    pivot_longer(c(Grupa_A, Grupa_B), names_to = \"grupa\", values_to = \"gustoca\")\n}) |>\n  mutate(panel = factor(panel, levels = d_labels))\n\nd_viz |>\n  ggplot(aes(x = x, y = gustoca, fill = grupa)) +\n  geom_area(alpha = 0.4, position = \"identity\") +\n  facet_wrap(~panel, ncol = 2) +\n  scale_fill_manual(values = c(\"Grupa_A\" = \"steelblue\", \"Grupa_B\" = \"#2a9d8f\"),\n                    labels = c(\"Grupa A\", \"Grupa B\")) +\n  labs(\n    title = \"Å to znaÄi Cohenov d?\",\n    subtitle = \"VeÄ‡i d = manje preklapanja izmeÄ‘u distribucija = oÄitija razlika\",\n    x = \"Vrijednost\", y = \"GustoÄ‡a\", fill = NULL\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/cohen-d-vizualizacija-1.png){width=960}\n:::\n:::\n\n\nS d = 0.2, distribucije se gotovo potpuno preklapaju i razliku je teÅ¡ko primijetiti. S d = 0.8, razdvajanje je oÄito. NaÅ¡ d â‰ˆ 1.3 pokazuje vrlo jasno razdvajanje: carousel i single image su oÄigledno razliÄite kategorije po angaÅ¾manu.\n\n::: {.callout-tip}\n## PraktiÄni savjet\n\nUvijek izvjeÅ¡tavajte veliÄinu uÄinka uz p-vrijednost. Umjesto \"razlika je statistiÄki znaÄajna (p < 0.001)\", napiÅ¡ite \"carousel objave imaju znaÄajno viÅ¡i angaÅ¾man od single image objava (razlika = 2.6 postotnih bodova, d = 1.34, p < 0.001).\" Ovo daje Äitatelju informaciju i o postojanju i o veliÄini razlike.\n:::\n\n---\n\n## StatistiÄka snaga {#sec-snaga}\n\n**StatistiÄka snaga** (power) je vjerojatnost da test odbaci Hâ‚€ kad je Hâ‚ istinita. Drugim rijeÄima: koliko je vjerojatno da Ä‡emo detektirati pravu razliku ako ona postoji?\n\nSnaga ovisi o Äetiri faktora: veliÄini uÄinka (veÄ‡i uÄinak je lakÅ¡e detektirati), veliÄini uzorka (viÅ¡e podataka daje veÄ‡u snagu), razini znaÄajnosti Î± (veÄ‡i Î± daje veÄ‡u snagu ali viÅ¡e laÅ¾no pozitivnih), i varijabilnosti podataka (manja varijabilnost daje veÄ‡u snagu).\n\nKonvencija je da snaga treba biti barem 0.80 (80%). Ovo znaÄi da ako razlika postoji, Å¾elimo je detektirati barem u 8 od 10 pokuÅ¡aja.\n\n### Analiza snage: koliki uzorak trebam?\n\nNajÄeÅ¡Ä‡a primjena analize snage je planiranje istraÅ¾ivanja: koliki uzorak mi treba da detektiram oÄekivanu veliÄinu uÄinka s 80% snagom?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# power.t.test() za dvouzoraÄki test\n# Koliki uzorak trebam za srednji uÄinak (d = 0.5)?\npower.t.test(\n  delta = 0.5,       # oÄekivana razlika u SD jedinicama (Cohenov d)\n  sd = 1,            # standardizirano na 1\n  sig.level = 0.05,  # Î±\n  power = 0.80,      # Å¾eljena snaga\n  type = \"two.sample\",\n  alternative = \"two.sided\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n     Two-sample t test power calculation \n\n              n = 63.76576\n          delta = 0.5\n             sd = 1\n      sig.level = 0.05\n          power = 0.8\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n```\n\n\n:::\n:::\n\n\nZa detektiranje srednjeg uÄinka (d = 0.5) s 80% snagom potrebno je otprilike 64 ispitanika po grupi (ukupno 128). Pogledajmo kako se potreban uzorak mijenja s veliÄinom uÄinka.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd_values <- c(0.2, 0.3, 0.5, 0.8, 1.0, 1.3)\n\npower_tablica <- map_df(d_values, \\(d_val) {\n  rez <- power.t.test(delta = d_val, sd = 1, sig.level = 0.05, power = 0.80,\n                      type = \"two.sample\", alternative = \"two.sided\")\n  tibble(\n    cohenov_d = d_val,\n    n_po_grupi = ceiling(rez$n),\n    ukupno_n = ceiling(rez$n) * 2\n  )\n})\n\npower_tablica\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 3\n  cohenov_d n_po_grupi ukupno_n\n      <dbl>      <dbl>    <dbl>\n1       0.2        394      788\n2       0.3        176      352\n3       0.5         64      128\n4       0.8         26       52\n5       1           17       34\n6       1.3         11       22\n```\n\n\n:::\n:::\n\n\nZa mali uÄinak (d = 0.2) trebate Äak 394 ispitanika po grupi. Za veliki uÄinak (d = 0.8) trebate samo 26 po grupi. Ovo je razlog zaÅ¡to je planiranje unaprijed kljuÄno: morate imati realistiÄna oÄekivanja o veliÄini uÄinka da biste znali koliko podataka trebate.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Krivulja snage: kako snaga raste s veliÄinom uzorka\nn_range <- seq(10, 300, by = 5)\n\npower_curves <- map_df(c(0.2, 0.5, 0.8), \\(d_val) {\n  map_df(n_range, \\(n_val) {\n    p <- power.t.test(n = n_val, delta = d_val, sd = 1, sig.level = 0.05,\n                      type = \"two.sample\", alternative = \"two.sided\")$power\n    tibble(n = n_val, power = p, d = paste(\"d =\", d_val))\n  })\n})\n\npower_curves |>\n  ggplot(aes(x = n, y = power, color = d)) +\n  geom_line(linewidth = 1.2) +\n  geom_hline(yintercept = 0.80, linetype = \"dashed\", color = \"grey50\") +\n  annotate(\"text\", x = 290, y = 0.82, label = \"Snaga = 0.80\", color = \"grey50\", hjust = 1) +\n  scale_y_continuous(labels = scales::label_percent(), limits = c(0, 1)) +\n  scale_color_manual(values = c(\"d = 0.2\" = \"#e76f51\", \"d = 0.5\" = \"#e9c46a\", \"d = 0.8\" = \"#2a9d8f\")) +\n  labs(\n    title = \"Krivulje snage za dvouzoraÄki t-test\",\n    subtitle = \"VeÄ‡i uÄinak ili veÄ‡i uzorak = veÄ‡a snaga detektiranja razlike\",\n    x = \"VeliÄina uzorka (po grupi)\",\n    y = \"StatistiÄka snaga\",\n    color = NULL\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/power-krivulja-1.png){width=864}\n:::\n:::\n\n\nZa mali uÄinak (d = 0.2, crvena), snaga sporo raste i ni s n = 300 po grupi ne dostiÅ¾e 100%. Za veliki uÄinak (d = 0.8, zelena), snaga brzo raste i s n = 30 po grupi je veÄ‡ blizu 80%.\n\n### Kolika je snaga naÅ¡eg Instagram testa?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Kolika je snaga naÅ¡eg testa s d â‰ˆ 1.34 i n â‰ˆ 250 po grupi?\npower_ig <- power.t.test(\n  n = min(n1, n2),\n  delta = d,\n  sd = 1,\n  sig.level = 0.05,\n  type = \"two.sample\",\n  alternative = \"two.sided\"\n)\n\ncat(\"Snaga naÅ¡eg testa:\", round(power_ig$power, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSnaga naÅ¡eg testa: 1 \n```\n\n\n:::\n:::\n\n\nSnaga je gotovo 1.0 (100%). S ovakvom veliÄinom uÄinka i ovako velikim uzorkom, gotovo nema Å¡anse da bismo propustili ovu razliku. Test je bio viÅ¡e nego adekvatno snaÅ¾an. U praksi, mogli smo detektirati ovu razliku s mnogo manje podataka.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Koliki minimalni uzorak bi bio dovoljan?\nmin_n <- power.t.test(\n  delta = d,\n  sd = 1,\n  sig.level = 0.05,\n  power = 0.80,\n  type = \"two.sample\"\n)\n\ncat(\"Minimalni n po grupi za 80% snagu:\", ceiling(min_n$n), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMinimalni n po grupi za 80% snagu: 10 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Mi smo imali:\", min(n1, n2), \"po grupi\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMi smo imali: 236 po grupi\n```\n\n\n:::\n:::\n\n\n---\n\n## Upareni t-test {#sec-paired}\n\nDosad smo usporeÄ‘ivali dvije **nezavisne** skupine (carousel vs single image su razliÄite objave). Ali ponekad mjerimo istu jedinicu u dva uvjeta. Na primjer: angaÅ¾man istih pratitelja prije i poslije redizajna profila, ili rating istih Älanaka od strane dva razliÄita urednika.\n\nKad su opaÅ¾anja u parovima, koristimo **upareni t-test** (paired t-test). Umjesto da usporeÄ‘ujemo dva prosjeka, raÄunamo razliku za svaki par i testiramo je li prosjek razlika razliÄit od nule.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Simulacija: 30 Älanaka, svaki ocjenjen od 2 urednika\nurednicki_rating <- tibble(\n  clanak_id = 1:30,\n  urednik_A = round(rnorm(30, mean = 6.5, sd = 1.2), 1),\n  urednik_B = round(urednik_A + rnorm(30, mean = 0.5, sd = 0.8), 1)\n)\n\n# Urednik B ocjenjuje sustavno viÅ¡e\nurednicki_rating <- urednicki_rating |>\n  mutate(razlika = urednik_B - urednik_A)\n\nurednicki_rating |>\n  summarise(\n    M_A = round(mean(urednik_A), 2),\n    M_B = round(mean(urednik_B), 2),\n    M_razlika = round(mean(razlika), 2),\n    SD_razlika = round(sd(razlika), 2)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 Ã— 4\n    M_A   M_B M_razlika SD_razlika\n  <dbl> <dbl>     <dbl>      <dbl>\n1  6.59  6.99      0.41       0.84\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Upareni t-test\nt.test(urednicki_rating$urednik_B, urednicki_rating$urednik_A, paired = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPaired t-test\n\ndata:  urednicki_rating$urednik_B and urednicki_rating$urednik_A\nt = 2.648, df = 29, p-value = 0.01296\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n 0.09257456 0.72075877\nsample estimates:\nmean difference \n      0.4066667 \n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Usporedba: upareni vs nepareni test na istim podacima\npaired_p <- t.test(urednicki_rating$urednik_B, urednicki_rating$urednik_A, paired = TRUE)$p.value\nunpaired_p <- t.test(urednicki_rating$urednik_B, urednicki_rating$urednik_A, paired = FALSE)$p.value\n\ncat(\"Upareni test p-vrijednost:  \", round(paired_p, 5), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nUpareni test p-vrijednost:   0.01296 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Nepareni test p-vrijednost: \", round(unpaired_p, 5), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNepareni test p-vrijednost:  0.30785 \n```\n\n\n:::\n:::\n\n\nUpareni test je osjetljiviji (manja p-vrijednost) jer uklanja varijabilnost izmeÄ‘u parova. Neki Älanci su opÄ‡enito bolji, neki loÅ¡iji. Kad to kontroliramo (parenjem), preostaje samo varijabilnost u razlici izmeÄ‘u dva urednika, Å¡to je puno manja.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurednicki_rating |>\n  ggplot() +\n  geom_segment(aes(x = urednik_A, xend = urednik_B, y = clanak_id, yend = clanak_id),\n               color = \"grey70\", linewidth = 0.5) +\n  geom_point(aes(x = urednik_A, y = clanak_id), color = \"steelblue\", size = 2) +\n  geom_point(aes(x = urednik_B, y = clanak_id), color = \"#e76f51\", size = 2) +\n  annotate(\"text\", x = 3.5, y = 31, label = \"Urednik A\", color = \"steelblue\", fontface = \"bold\") +\n  annotate(\"text\", x = 10, y = 31, label = \"Urednik B\", color = \"#e76f51\", fontface = \"bold\") +\n  labs(\n    title = \"UredniÄke ocjene istih Älanaka\",\n    subtitle = \"Svaka linija je jedan Älanak. Urednik B sustavno ocjenjuje viÅ¡e.\",\n    x = \"Ocjena (1-10)\",\n    y = \"ÄŒlanak ID\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/paired-vizualizacija-1.png){width=864}\n:::\n:::\n\n\n::: {.callout-important}\n## Kada koristiti koji test?\n\n**Nepareni (nezavisni) t-test**: Dvije razliÄite skupine ispitanika. Primjeri: muÅ¡karci vs Å¾ene, kontrolna vs eksperimentalna grupa, carousel vs single image.\n\n**Upareni t-test**: Ista jedinica mjerena dva puta. Primjeri: prije i poslije intervencije, isti sadrÅ¾aj na dva kanala, isti ispitanik u dva uvjeta. KljuÄno pitanje: moÅ¾ete li smisleno spariti opaÅ¾anja? Ako da, koristite upareni test.\n:::\n\n---\n\n## StatistiÄka vs praktiÄna znaÄajnost {#sec-prakticna}\n\nStatistiÄka znaÄajnost (p < 0.05) govori da razlika vjerojatno nije sluÄajnost. Ali ne govori je li razlika dovoljno velika da je vaÅ¾na u praksi. Ovo razlikovanje je kljuÄno za donoÅ¡enje odluka.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)\n\n# Scenarij 1: StatistiÄki znaÄajno ali praktiÄki beznaÄajno\n# Novi dizajn naslovnice poveÄ‡ava CTR s 2.00% na 2.05%\nn_velik <- 50000\nctr_stari <- rbinom(n_velik, 1, 0.0200)\nctr_novi <- rbinom(n_velik, 1, 0.0205)\n\ntest1 <- t.test(ctr_novi, ctr_stari)\n\ncat(\"=== Scenarij 1: Velik uzorak, siÄ‡uÅ¡na razlika ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== Scenarij 1: Velik uzorak, siÄ‡uÅ¡na razlika ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Razlika CTR:\", round((mean(ctr_novi) - mean(ctr_stari)) * 100, 3), \"postotnih bodova\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRazlika CTR: -0.014 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"P-vrijednost:\", round(test1$p.value, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nP-vrijednost: 0.8762 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"StatistiÄki znaÄajno:\", test1$p.value < 0.05, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nStatistiÄki znaÄajno: FALSE \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Isplati li se redizajn? Vjerojatno ne.\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nIsplati li se redizajn? Vjerojatno ne.\n```\n\n\n:::\n\n```{.r .cell-code}\n# Scenarij 2: StatistiÄki neznaÄajno ali potencijalno praktiÄki vaÅ¾no\n# Novi format poveÄ‡ava CTR s 2.0% na 3.5% ali mali uzorak\nn_mali <- 80\nctr_stari2 <- rbinom(n_mali, 1, 0.020)\nctr_novi2 <- rbinom(n_mali, 1, 0.035)\n\ntest2 <- t.test(ctr_novi2, ctr_stari2)\n\ncat(\"=== Scenarij 2: Mali uzorak, veÄ‡a razlika ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== Scenarij 2: Mali uzorak, veÄ‡a razlika ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Razlika CTR:\", round((mean(ctr_novi2) - mean(ctr_stari2)) * 100, 2), \"postotnih bodova\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRazlika CTR: 0 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"P-vrijednost:\", round(test2$p.value, 4), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nP-vrijednost: 1 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"StatistiÄki znaÄajno:\", test2$p.value < 0.05, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nStatistiÄki znaÄajno: FALSE \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ZasluÅ¾uje li daljnje istraÅ¾ivanje? Vjerojatno da.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nZasluÅ¾uje li daljnje istraÅ¾ivanje? Vjerojatno da.\n```\n\n\n:::\n:::\n\n\nDonoÅ¡enje odluka na temelju samo p-vrijednosti je nepotpuno. Morate uzeti u obzir veliÄinu uÄinka, praktiÄne posljedice (troÅ¡ak redizajna vs dobitak od poveÄ‡anog CTR-a), interval pouzdanosti (koliki raspon razlika je konzistentan s podacima) i kontekst (kolika je razlika \"dovoljno velika\" u vaÅ¡oj industriji).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~` `, ~`PraktiÄki vaÅ¾no`, ~`PraktiÄki nevaÅ¾no`,\n  \"StatistiÄki znaÄajno (p < 0.05)\", \"âœ… Djeluj! Razlika postoji i vaÅ¾na je.\", \"âš ï¸ Razlika postoji ali je premala da bi se isplatila.\",\n  \"StatistiÄki neznaÄajno (p â‰¥ 0.05)\", \"ğŸ” MoÅ¾da nemaÅ¡ dovoljno podataka. PoveÄ‡aj uzorak.\", \"âœ… Nema uÄinka i to je u redu.\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 3\n  ` `                               `PraktiÄki vaÅ¾no`        `PraktiÄki nevaÅ¾no`\n  <chr>                             <chr>                    <chr>              \n1 StatistiÄki znaÄajno (p < 0.05)   \"âœ… Djeluj! Razlika postâ€¦ âš ï¸ Razlika postoji â€¦\n2 StatistiÄki neznaÄajno (p â‰¥ 0.05) \"\\U0001f50d MoÅ¾da nemaÅ¡â€¦ âœ… Nema uÄinka i toâ€¦\n```\n\n\n:::\n:::\n\n\n---\n\n## Potpuna analiza: Instagram A/B test izvjeÅ¡taj {#sec-analiza}\n\nSpojimo sve u koherentan izvjeÅ¡taj za urednicu. Slijedimo strukturu: opisna statistika, vizualizacija, statistiÄki test, veliÄina uÄinka, podanalize, zakljuÄak s preporukom.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Korak 1: Opisna statistika po formatu\nig |>\n  group_by(format) |>\n  summarise(\n    n = n(),\n    M_engagement = round(mean(engagement_rate) * 100, 2),\n    SD_engagement = round(sd(engagement_rate) * 100, 2),\n    M_likes = round(mean(likes), 0),\n    M_comments = round(mean(comments), 0),\n    M_shares = round(mean(shares), 0),\n    M_saves = round(mean(saves), 0),\n    .groups = \"drop\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 8\n  format        n M_engagement SD_engagement M_likes M_comments M_shares M_saves\n  <chr>     <int>        <dbl>         <dbl>   <dbl>      <dbl>    <dbl>   <dbl>\n1 carousel    236         10.1          2.11     180         36       25      42\n2 single_iâ€¦   264          7.5          1.77     149         24       20      30\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nig |>\n  ggplot(aes(x = format, y = engagement_rate * 100, fill = format)) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +\n  geom_jitter(width = 0.15, alpha = 0.15, size = 1) +\n  scale_fill_manual(values = c(\"carousel\" = \"#2a9d8f\", \"single_image\" = \"#e76f51\")) +\n  labs(\n    title = \"Engagement rate po formatu objave\",\n    subtitle = \"Carousel objave imaju vidljivo viÅ¡i angaÅ¾man\",\n    x = NULL,\n    y = \"Engagement rate (%)\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/analiza-boxplot-1.png){width=768}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Korak 2: StatistiÄki test\ntest_ig <- t.test(carousel, single)\n\n# Korak 3: VeliÄina uÄinka\ns_pooled <- sqrt(((n1 - 1) * sd(carousel)^2 + (n2 - 1) * sd(single)^2) / (n1 + n2 - 2))\nd_ig <- (mean(carousel) - mean(single)) / s_pooled\n\ncat(\"=== REZULTAT DVOUZORAÄŒKOG T-TESTA ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== REZULTAT DVOUZORAÄŒKOG T-TESTA ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"t(\", round(test_ig$parameter, 1), \") = \", round(test_ig$statistic, 2), \"\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nt(461.6) = 14.94\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"p < 0.001\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\np < 0.001\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Razlika prosjeka: \", round((mean(carousel) - mean(single)) * 100, 2), \" postotnih bodova\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRazlika prosjeka: 2.62 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"95% CI za razliku: [\", round(test_ig$conf.int[1] * 100, 2), \", \", \n    round(test_ig$conf.int[2] * 100, 2), \"] postotnih bodova\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n95% CI za razliku: [2.28, 2.97] postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Cohenov d:\", round(d_ig, 2), \"(veliki uÄinak)\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCohenov d: 1.35 (veliki uÄinak)\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Korak 4: Je li prednost carousela konzistentna po temama?\nig |>\n  group_by(topic, format) |>\n  summarise(M = mean(engagement_rate) * 100, .groups = \"drop\") |>\n  ggplot(aes(x = fct_reorder(topic, M, .fun = max), y = M, fill = format)) +\n  geom_col(position = \"dodge\", alpha = 0.8) +\n  scale_fill_manual(values = c(\"carousel\" = \"#2a9d8f\", \"single_image\" = \"#e76f51\")) +\n  labs(\n    title = \"Engagement rate po temi i formatu\",\n    subtitle = \"Carousel prednost je konzistentna preko svih tema\",\n    x = NULL,\n    y = \"ProsjeÄni engagement rate (%)\",\n    fill = \"Format\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/analiza-po-temi-1.png){width=864}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# StatistiÄki testovi po temi\nig |>\n  group_by(topic) |>\n  summarise(\n    n_carousel = sum(format == \"carousel\"),\n    n_single = sum(format == \"single_image\"),\n    M_carousel = round(mean(engagement_rate[format == \"carousel\"]) * 100, 2),\n    M_single = round(mean(engagement_rate[format == \"single_image\"]) * 100, 2),\n    razlika = round(M_carousel - M_single, 2),\n    p = round(t.test(\n      engagement_rate[format == \"carousel\"],\n      engagement_rate[format == \"single_image\"]\n    )$p.value, 4),\n    znacajno = p < 0.05,\n    .groups = \"drop\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 Ã— 8\n  topic     n_carousel n_single M_carousel M_single razlika     p znacajno\n  <chr>          <int>    <int>      <dbl>    <dbl>   <dbl> <dbl> <lgl>   \n1 kultura           35       49       9.66     7.64    2.02     0 TRUE    \n2 lifestyle         61       68      10.6      8.04    2.56     0 TRUE    \n3 sport             46       53      11        7.42    3.58     0 TRUE    \n4 tech              25       22      10.0      6.93    3.09     0 TRUE    \n5 vijesti           69       72       9.37     7.12    2.25     0 TRUE    \n```\n\n\n:::\n:::\n\n\nPrednost carousela je statistiÄki znaÄajna za sve teme. UÄinak je konzistentan, Å¡to pojaÄava naÅ¡e povjerenje u zakljuÄak.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Korak 5: Utjecaj CTA na komentare\nig |>\n  group_by(format, has_cta) |>\n  summarise(M_comments = mean(comments), .groups = \"drop\") |>\n  mutate(has_cta = if_else(has_cta, \"S pozivom na akciju\", \"Bez poziva na akciju\")) |>\n  ggplot(aes(x = format, y = M_comments, fill = has_cta)) +\n  geom_col(position = \"dodge\", alpha = 0.8) +\n  scale_fill_manual(values = c(\"S pozivom na akciju\" = \"#264653\", \"Bez poziva na akciju\" = \"#a8dadc\")) +\n  labs(\n    title = \"ProsjeÄan broj komentara: format Ã— poziv na akciju\",\n    subtitle = \"CTA poveÄ‡ava komentare, osobito kod carousel objava\",\n    x = NULL,\n    y = \"ProsjeÄan broj komentara\",\n    fill = NULL\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/analiza-cta-1.png){width=864}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Korak 6: Engagement po dobu dana\nig |>\n  mutate(time_of_day = factor(time_of_day, levels = c(\"jutro\", \"podne\", \"poslijepodne\", \"veÄer\"))) |>\n  group_by(time_of_day, format) |>\n  summarise(\n    M = mean(engagement_rate) * 100,\n    SE = sd(engagement_rate) / sqrt(n()) * 100,\n    .groups = \"drop\"\n  ) |>\n  ggplot(aes(x = time_of_day, y = M, color = format, group = format)) +\n  geom_line(linewidth = 1) +\n  geom_point(size = 3) +\n  geom_errorbar(aes(ymin = M - 1.96 * SE, ymax = M + 1.96 * SE), width = 0.15) +\n  scale_color_manual(values = c(\"carousel\" = \"#2a9d8f\", \"single_image\" = \"#e76f51\")) +\n  labs(\n    title = \"Engagement rate po dobu dana s intervalima pouzdanosti\",\n    subtitle = \"Carousel prednost prisutna u svim terminima. Poslijepodne je optimalno za oba formata.\",\n    x = NULL,\n    y = \"Engagement rate (%)\",\n    color = \"Format\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](week-10_files/figure-html/analiza-vrijeme-1.png){width=864}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Korak 7: IzvjeÅ¡taj za urednicu\ncat(\"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"   IZVJEÅ TAJ: A/B TEST FORMATA INSTAGRAM OBJAVA\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   IZVJEÅ TAJ: A/B TEST FORMATA INSTAGRAM OBJAVA\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"UZORAK: \", nrow(ig), \" objava (\", n1, \" carousel, \", n2, \" single image)\\n\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nUZORAK: 500 objava (236 carousel, 264 single image)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"GLAVNI NALAZ:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGLAVNI NALAZ:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Carousel objave generiraju statistiÄki znaÄajno viÅ¡i angaÅ¾man\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCarousel objave generiraju statistiÄki znaÄajno viÅ¡i angaÅ¾man\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"od single image objava.\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nod single image objava.\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"BROJKE:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nBROJKE:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Carousel engagement:    \", round(mean(carousel) * 100, 2), \"% (SD = \", \n    round(sd(carousel) * 100, 2), \"%)\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Carousel engagement:    10.12% (SD = 2.11%)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Single image engagement:\", round(mean(single) * 100, 2), \"% (SD = \", \n    round(sd(single) * 100, 2), \"%)\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Single image engagement:7.5% (SD = 1.77%)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Razlika: \", round((mean(carousel) - mean(single)) * 100, 2), \n    \" postotnih bodova\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Razlika: 2.62 postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  95% CI:  [\", round(test_ig$conf.int[1] * 100, 2), \", \", \n    round(test_ig$conf.int[2] * 100, 2), \"] postotnih bodova\\n\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  95% CI:  [2.28, 2.97] postotnih bodova\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"STATISTIKA:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSTATISTIKA:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  t(\", round(test_ig$parameter, 1), \") = \", round(test_ig$statistic, 2), \n    \", p < 0.001\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  t(461.6) = 14.94, p < 0.001\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Cohenov d = \", round(d_ig, 2), \" (veliki uÄinak)\\n\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Cohenov d = 1.35 (veliki uÄinak)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"DODACI:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDODACI:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  * Prednost je konzistentna preko svih tema i svih doba dana.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  * Prednost je konzistentna preko svih tema i svih doba dana.\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  * Poziv na akciju dodatno pojaÄava komentare (+15%).\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  * Poziv na akciju dodatno pojaÄava komentare (+15%).\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  * Poslijepodne je optimalno vrijeme za objavu oba formata.\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  * Poslijepodne je optimalno vrijeme za objavu oba formata.\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"PREPORUKA:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPREPORUKA:\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  Prebacite Å¡to veÄ‡i udio objava na carousel format,\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Prebacite Å¡to veÄ‡i udio objava na carousel format,\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  osobito za lifestyle i sportski sadrÅ¾aj koji i inaÄe\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  osobito za lifestyle i sportski sadrÅ¾aj koji i inaÄe\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  generiraju najviÅ¡i angaÅ¾man. Kombinirajte s pozivom\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  generiraju najviÅ¡i angaÅ¾man. Kombinirajte s pozivom\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"  na akciju za maksimalne komentare.\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  na akciju za maksimalne komentare.\n```\n\n\n:::\n:::\n\n\n---\n\n## JoÅ¡ o p-vrijednostima: ASA izjava i viÅ¡estruko testiranje {#sec-asa}\n\nAmeriÄka statistiÄka asocijacija (ASA) je 2016. izdala izjavu o p-vrijednostima. Å est principa vrijedi ponoviti.\n\nP-vrijednosti mogu pokazati koliko su podaci nekompatibilni sa specificiranim statistiÄkim modelom. P-vrijednosti ne mjere vjerojatnost da je hipoteza istinita niti vjerojatnost da su podaci proizvedeni samo sluÄajnoÅ¡Ä‡u. Znanstveni zakljuÄci i poslovne odluke ne bi se trebali temeljiti samo na tome prelazi li p-vrijednost specifiÄan prag. Ispravno zakljuÄivanje zahtijeva puno izvjeÅ¡tavanje i transparentnost. P-vrijednost ne mjeri veliÄinu uÄinka niti vaÅ¾nost rezultata. Sama p-vrijednost ne pruÅ¾a dobru mjeru dokaza za model ili hipotezu.\n\n### ViÅ¡estruko testiranje\n\nKad provodimo mnogo testova istovremeno, poveÄ‡ava se Å¡ansa da barem jedan bude laÅ¾no pozitivan.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Simulacija: 20 testova, SVI pod Hâ‚€ (nema pravih razlika)\nset.seed(42)\n\nsim_20_testova <- map_df(1:20, \\(i) {\n  a <- rnorm(50, mean = 5, sd = 2)\n  b <- rnorm(50, mean = 5, sd = 2)  # isti prosjek!\n  test <- t.test(a, b)\n  tibble(test_broj = i, p = round(test$p.value, 4), znacajno = test$p.value < 0.05)\n})\n\ncat(\"Od 20 testova (svi Hâ‚€ istiniti):\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOd 20 testova (svi Hâ‚€ istiniti):\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"StatistiÄki znaÄajnih:\", sum(sim_20_testova$znacajno), \"\\n\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nStatistiÄki znaÄajnih: 1 \n```\n\n\n:::\n\n```{.r .cell-code}\nsim_20_testova |> filter(znacajno)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 Ã— 3\n  test_broj      p znacajno\n      <int>  <dbl> <lgl>   \n1         9 0.0377 TRUE    \n```\n\n\n:::\n:::\n\n\nÄŒak i kad nijedan uÄinak ne postoji, jedan ili viÅ¡e testova moÅ¾e biti \"statistiÄki znaÄajan.\" Ovo je problem viÅ¡estrukog testiranja. Postoje korekcije (Bonferronijeva: podijelite Î± s brojem testova), ali svjesnost o problemu je prvi korak.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bonferronijeva korekcija\nsim_20_testova |>\n  mutate(\n    p_korigirana = p.adjust(p, method = \"bonferroni\"),\n    znacajno_korigirano = p_korigirana < 0.05\n  ) |>\n  filter(znacajno | znacajno_korigirano) |>\n  select(test_broj, p, znacajno, p_korigirana, znacajno_korigirano)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 Ã— 5\n  test_broj      p znacajno p_korigirana znacajno_korigirano\n      <int>  <dbl> <lgl>           <dbl> <lgl>              \n1         9 0.0377 TRUE            0.754 FALSE              \n```\n\n\n:::\n:::\n\n\nNakon Bonferronijeve korekcije, nijedan test nije znaÄajan. Korekcija je konzervativna (mnogo laÅ¾no negativnih), ali Å¡titi od laÅ¾no pozitivnih kad provodimo mnogo testova.\n\n::: {.callout-warning}\n## Upozorenje\n\nAko u istraÅ¾ivanju testirate mnogo varijabli i izvijestite samo one koje su znaÄajne, to se zove **p-hacking** ili **cherry-picking**. Rezultati dobiveni na taj naÄin nisu pouzdani jer ne uzimaju u obzir viÅ¡estruko testiranje. Uvijek izvijestite koliko ste testova proveli, ne samo one koji su dali p < 0.05.\n:::\n\n---\n\n## Pregled svih t-testova {#sec-pregled}\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntribble(\n  ~test, ~situacija, ~R_kod, ~primjer,\n  \"JednouzoraÄki\", \"Jedan uzorak vs poznata vrijednost\", \"t.test(x, mu = 5)\", \"Je li prosjeÄno vrijeme Äitanja = 3 min?\",\n  \"DvouzoraÄki (nezavisni)\", \"Dvije nezavisne skupine\", \"t.test(x, y)\", \"Carousel vs single image engagement\",\n  \"Upareni\", \"Iste jedinice, dva mjerenja\", \"t.test(x, y, paired = TRUE)\", \"Ocjene istih Älanaka od 2 urednika\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 Ã— 4\n  test                    situacija                          R_kod       primjer\n  <chr>                   <chr>                              <chr>       <chr>  \n1 JednouzoraÄki           Jedan uzorak vs poznata vrijednost t.test(x, â€¦ Je li â€¦\n2 DvouzoraÄki (nezavisni) Dvije nezavisne skupine            t.test(x, â€¦ Carousâ€¦\n3 Upareni                 Iste jedinice, dva mjerenja        t.test(x, â€¦ Ocjeneâ€¦\n```\n\n\n:::\n:::\n\n\nSva tri testa imaju istu logiku (testiramo Hâ‚€, raÄunamo t, gledamo p). Razlikuju se u formulaciji Hâ‚€ i naÄinu izraÄuna SE. R funkcija `t.test()` pokriva sva tri sluÄaja.\n\n---\n\n::: {.callout-important}\n## KljuÄni zakljuÄci\n\n1. Testiranje hipoteza postavlja nultu hipotezu (Hâ‚€: nema uÄinka) i traÅ¾i dokaze protiv nje. Ako su podaci dovoljno neobiÄni pod Hâ‚€ (p < Î±), odbacujemo Hâ‚€.\n\n2. Testna statistika mjeri koliko su podaci neobiÄni pod Hâ‚€. Za t-test: t = razlika / SE. VeÄ‡i |t| = jaÄi dokaz protiv Hâ‚€.\n\n3. P-vrijednost je vjerojatnost podataka (ili ekstremnijih) pod Hâ‚€. NIJE vjerojatnost da je Hâ‚€ istinita. NIJE mjera veliÄine uÄinka.\n\n4. `t.test()` pokriva jednouzoraÄki (mu = vrijednost), dvouzoraÄki (dva vektora) i upareni test (paired = TRUE). Welchov test (default) ne pretpostavlja jednake varijance.\n\n5. GreÅ¡ka tipa I (Î±) je laÅ¾no pozitivni rezultat. GreÅ¡ka tipa II (Î²) je propuÅ¡tena prava razlika. Snaga = 1 âˆ’ Î² trebala bi biti barem 0.80.\n\n6. Cohenov d izraÅ¾ava razliku u SD jedinicama: d = 0.2 mali, d = 0.5 srednji, d = 0.8 veliki uÄinak. Uvijek ga izvijestite uz p-vrijednost.\n\n7. `power.t.test()` raÄuna potrebnu veliÄinu uzorka za zadanu snagu, uÄinak i Î±. Planirajte istraÅ¾ivanje PRIJE prikupljanja podataka.\n\n8. Upareni t-test je osjetljiviji od nezavisnog jer kontrolira varijabilnost izmeÄ‘u parova. Koristite ga kad iste jedinice mjerite dva puta.\n\n9. StatistiÄka znaÄajnost (p < 0.05) ne znaÄi praktiÄnu vaÅ¾nost. Velik uzorak moÅ¾e detektirati trivijalne razlike. Mali uzorak moÅ¾e propustiti vaÅ¾ne razlike.\n\n10. ViÅ¡estruko testiranje inflacionira greÅ¡ku tipa I. Ako provodite mnogo testova, koristite korekciju (Bonferroni, BH) ili barem transparentno izvijestite koliko ste testova proveli.\n\n11. Kompletni izvjeÅ¡taj ukljuÄuje opisnu statistiku, vizualizaciju, testnu statistiku s p-vrijednoÅ¡Ä‡u, veliÄinu uÄinka (d) s interpretacijom, interval pouzdanosti za razliku i praktiÄnu preporuku.\n\n12. Odsutnost statistiÄki znaÄajnog rezultata (p â‰¥ 0.05) ne znaÄi da uÄinak ne postoji. MoÅ¾da uzorak nije bio dovoljno velik. Zato nikad ne kaÅ¾emo \"prihvaÄ‡amo Hâ‚€.\"\n:::\n\n---\n\n## Zadaci za pripremu\n\n1. UÄitajte `instagram_ab_test.csv`. Testirajte razlikuje li se prosjeÄan broj `saves` izmeÄ‘u carousel i single image objava. IzraÄunajte Cohenov d i interpretirajte ga.\n\n2. Odredite minimalnu veliÄinu uzorka po grupi potrebnu za detektiranje srednjeg uÄinka (d = 0.5) s 90% snagom na razini Î± = 0.01.\n\n3. Simulirajte 1000 t-testova gdje su oba uzorka iz iste distribucije (Hâ‚€ istinita). Koliki postotak p-vrijednosti je ispod 0.05? Nacrtajte histogram p-vrijednosti i usporedite s uniformnom distribucijom.\n\n---\n\n## Dodatno Äitanje\n\n**Obavezno**\n\nNavarro, D. (2018). *Learning Statistics with R*, Chapter 11 (Hypothesis Testing). Besplatno dostupno na [learningstatisticswithr.com](https://learningstatisticswithr.com/lsr-0.6.pdf). Pokriva logiku testiranja hipoteza, t-test i p-vrijednost s R kodom.\n\n**PreporuÄeno**\n\nDiez, D., Ã‡etinkaya-Rundel, M., & Barr, C. (2019). *OpenIntro Statistics* (4th edition), Chapter 7. Besplatno dostupno na [openintro.org/book/os](https://www.openintro.org/book/os/). Jasne vizualizacije logike testiranja.\n\nWasserstein, R. L., & Lazar, N. A. (2016). The ASA Statement on p-Values: Context, Process, and Purpose. *The American Statistician*, 70(2), 129-133. SluÅ¾bena izjava o pravilnoj upotrebi i interpretaciji p-vrijednosti.\n\nCohen, J. (1992). A Power Primer. *Psychological Bulletin*, 112(1), 155-159. KlasiÄan kratki pregled veliÄina uÄinka i analize snage.\n\n---\n\n## Pojmovnik\n\n| Pojam | ObjaÅ¡njenje |\n|---|---|\n| Nulta hipoteza (Hâ‚€) | PoÄetna pretpostavka da nema uÄinka ili razlike. SadrÅ¾i znak jednakosti. |\n| Alternativna hipoteza (Hâ‚) | Tvrdnja da uÄinak ili razlika postoji. SadrÅ¾i znak nejednakosti. |\n| Testna statistika | Broj koji mjeri koliko su podaci neobiÄni pod Hâ‚€. Za t-test: t = razlika / SE. |\n| P-vrijednost | Vjerojatnost podataka (ili ekstremnijih) pod pretpostavkom da je Hâ‚€ istinita. |\n| Razina znaÄajnosti (Î±) | Prag za odbacivanje Hâ‚€. ObiÄno 0.05. Kontrolira greÅ¡ku tipa I. |\n| GreÅ¡ka tipa I | Odbacimo Hâ‚€ kad je istinita. LaÅ¾no pozitivni rezultat. Vjerojatnost = Î±. |\n| GreÅ¡ka tipa II | Ne odbacimo Hâ‚€ kad je laÅ¾na. PropuÅ¡teni pravi uÄinak. Vjerojatnost = Î². |\n| StatistiÄka snaga | Vjerojatnost detektiranja pravog uÄinka. Snaga = 1 âˆ’ Î². Cilj â‰¥ 0.80. |\n| Cohenov d | Standardizirana mjera veliÄine uÄinka: razlika prosjeka / pooled SD. d = 0.2 mali, 0.5 srednji, 0.8 veliki. |\n| Pooled SD | ZajedniÄka standardna devijacija dviju grupa, ponderirana njihovim veliÄinama. |\n| JednouzoraÄki t-test | Usporedba jednog prosjeka s poznatom vrijednoÅ¡Ä‡u. `t.test(x, mu = ...)`. |\n| DvouzoraÄki t-test | Usporedba prosjeka dviju nezavisnih skupina. `t.test(x, y)`. |\n| Welchov t-test | Default u R-u. Ne pretpostavlja jednake varijance. Robusniji od Studentovog. |\n| Upareni t-test | Usporedba parova (iste jedinice, dva mjerenja). `t.test(x, y, paired = TRUE)`. |\n| Dvosmjerni test | Hâ‚: Î¼â‚ â‰  Î¼â‚‚. Testira razliku u oba smjera. Default u R-u. |\n| Jednosmjerni test | Hâ‚: Î¼â‚ > Î¼â‚‚ ili Î¼â‚ < Î¼â‚‚. Osjetljiviji u jednom smjeru ali slijep za drugi. |\n| ViÅ¡estruko testiranje | ProvoÄ‘enje mnogo testova istovremeno. Inflacionira greÅ¡ku tipa I. |\n| Bonferronijeva korekcija | Dijeljenje Î± s brojem testova. Konzervativna ali jednostavna korekcija. |\n| P-hacking | Selektivno izvjeÅ¡tavanje znaÄajnih rezultata iz mnogo provedenih testova. Neprihvatljiva praksa. |\n| `power.t.test()` | R funkcija za analizu snage: izraÄun potrebnog n, snage ili detektabilnog uÄinka. |\n| `p.adjust()` | R funkcija za korekciju p-vrijednosti za viÅ¡estruko testiranje (Bonferroni, BH, itd.). |\n",
    "supporting": [
      "week-10_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}